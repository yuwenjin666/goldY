<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>云计算方向-2022年云计算职业技能大赛国赛题 | GoldY</title><meta name="author" content="GoldY"><meta name="copyright" content="GoldY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="2022年云计算职业技能大赛国赛题">
<meta property="og:type" content="article">
<meta property="og:title" content="云计算方向-2022年云计算职业技能大赛国赛题">
<meta property="og:url" content="https://www.geekgold.xyz/posts/6bf8b7d7.html">
<meta property="og:site_name" content="GoldY">
<meta property="og:description" content="2022年云计算职业技能大赛国赛题">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.geekgold.xyz/img/cloud-com.jpg">
<meta property="article:published_time" content="2025-05-14T02:47:30.000Z">
<meta property="article:modified_time" content="2025-05-14T03:16:03.862Z">
<meta property="article:author" content="GoldY">
<meta property="article:tag" content="云计算">
<meta property="article:tag" content="云计算职业技能大赛">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.geekgold.xyz/img/cloud-com.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "云计算方向-2022年云计算职业技能大赛国赛题",
  "url": "https://www.geekgold.xyz/posts/6bf8b7d7.html",
  "image": "https://www.geekgold.xyz/img/cloud-com.jpg",
  "datePublished": "2025-05-14T02:47:30.000Z",
  "dateModified": "2025-05-14T03:16:03.862Z",
  "author": [
    {
      "@type": "Person",
      "name": "GoldY",
      "url": "https://www.geekgold.xyz/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.geekgold.xyz/posts/6bf8b7d7.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="bing-site-verification" content="E05CD8D6921B8F2AA32324DF2B267557"/><meta name="baidu-site-verification" content="codeva-tCktTl1n17"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":2,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '云计算方向-2022年云计算职业技能大赛国赛题',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/bg2.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-link"></i><span> 工具链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-cog"></i><span> 渗透工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cloud-com.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">GoldY</span></a><a class="nav-page-title" href="/"><span class="site-name">云计算方向-2022年云计算职业技能大赛国赛题</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-link"></i><span> 工具链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-cog"></i><span> 渗透工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">云计算方向-2022年云计算职业技能大赛国赛题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-14T02:47:30.000Z" title="发表于 2025-05-14 10:47:30">2025-05-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-14T03:16:03.862Z" title="更新于 2025-05-14 11:16:03">2025-05-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/%E6%8A%80%E8%83%BD%E5%A4%A7%E8%B5%9B%E6%B1%87%E6%80%BB/">技能大赛汇总</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">8.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="第一套"><a href="#第一套" class="headerlink" title="第一套"></a>第一套</h1><h2 id="【任务-1】私有云服务搭建-10分"><a href="#【任务-1】私有云服务搭建-10分" class="headerlink" title="【任务 1】私有云服务搭建[10分]"></a><strong>【任务</strong> 1】私有云服务搭建[10分]</h2><h3 id="【题目-1】基础环境配置-0-5-分"><a href="#【题目-1】基础环境配置-0-5-分" class="headerlink" title="【题目 1】基础环境配置[0.5 分]"></a>【题目 1】基础环境配置[0.5 分]</h3><p>使用提供的用户名密码，登录提供的 OpenStack 私有云平台，在当前租户下，使用CentOS7.9 镜像，创建两台云主机，云主机类型使用 4vCPU&#x2F;12G&#x2F;100G_50G 类型。当前租户下默认存在一张网卡，自行创建第二张网卡并连接至 controller 和 compute 节点（第二张网卡的网段为 10.10.X.0&#x2F;24，X 为工位号，不需要创建路由）。自行检查安全组策略，以确保网络正常通信与 ssh 连接，然后按以下要求配置服务器：</p>
<p>（1）设置控制节点主机名为 controller，设置计算节点主机名为 compute； </p>
<p>（2）修改 hosts 文件将 IP 地址映射为主机名；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.查看控制节点名字为 controller 正确计 0.2 分</span><br><span class="line">2.查看 hosts 文件中有正确的主机名和 IP 映射计 0.2 分</span><br><span class="line">3.控制节点正确使用两块网卡计 0.1 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# hostname</span><br><span class="line">controller</span><br><span class="line">[root@controller ~]# <span class="built_in">cat</span> /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.100.10 controller</span><br><span class="line">192.168.100.20 compute</span><br><span class="line">[root@controller ~]# ip a</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:3d:4b:e6 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.100.10/24 brd 192.168.100.255 scope global noprefixroute ens33</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::ee56:e4e:d291:8f31/64 scope <span class="built_in">link</span> noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: ens34: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    <span class="built_in">link</span>/ether 00:0c:29:3d:4b:f0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.200.10/24 brd 192.168.200.255 scope global noprefixroute ens34</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::fe7c:1bec:9978:2d47/64 scope <span class="built_in">link</span> noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h3 id="【题目-2】Yum-源配置-0-5-分"><a href="#【题目-2】Yum-源配置-0-5-分" class="headerlink" title="【题目 2】Yum 源配置[0.5 分]"></a>【题目 2】Yum 源配置[0.5 分]</h3><p>使用提供的 http 服务地址，在 http 服务下，存在 centos7.9 和 iaas 的网络 yum 源，使用该 http 源作为安装 iaas 平台的网络源。分别设置 controller 节点和 compute 节点的 yum 源文件 http.repo。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.查看/etc/yum.repos.d/http.repo 文件，有正确的 baseurl 路径，计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接删除默认源</span></span><br><span class="line"><span class="built_in">rm</span> -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建http类型的yum源</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/yum.repos.d/http.repo &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[centos]</span></span><br><span class="line"><span class="string">name=centos</span></span><br><span class="line"><span class="string">baseurl=http://192.168.100.100/centos</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">[iaas]</span></span><br><span class="line"><span class="string">name=iaas</span></span><br><span class="line"><span class="string">baseurl=http://192.168.100.100/iaas/iaas-repo</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以通过来验证源的配置是否正确</span></span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>

<h3 id="【题目-3】配置无秘钥-ssh-0-5-分"><a href="#【题目-3】配置无秘钥-ssh-0-5-分" class="headerlink" title="【题目 3】配置无秘钥 ssh[0.5 分]"></a>【题目 3】配置无秘钥 ssh[0.5 分]</h3><p>配置 controller 节点可以无秘钥访问 compute 节点，配置完成后，尝试 ssh 连接 compute节点的 hostname 进行测试。完成后提交 controller 节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.查看控制节点允许计算节点无秘钥登录计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# ssh root@compute</span><br><span class="line">The authenticity of host <span class="string">&#x27;compute (192.168.100.20)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:w8T7ol8B+536sySmpugXGrPle6li9IMnc+ijwbcgjLc.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:31:1d:72:34:56:3d:fa:0c:71:30:cf:f4:77:66:b0:b6.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>compute<span class="string">&#x27; (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Last login: Wed Oct 12 15:13:34 2022</span></span><br><span class="line"><span class="string">[root@compute ~]# hostname</span></span><br><span class="line"><span class="string">compute</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建密钥（回车即可）</span></span><br><span class="line">ssh-keygen</span><br><span class="line"><span class="comment">#上传密钥</span></span><br><span class="line">ssh-copy-id root@192.168.100.20</span><br><span class="line"><span class="comment">#验证</span></span><br><span class="line">ssh root@compute</span><br><span class="line">hostname</span><br></pre></td></tr></table></figure>

<h3 id="【题目-4】基础安装-0-5-分"><a href="#【题目-4】基础安装-0-5-分" class="headerlink" title="【题目 4】基础安装[0.5 分]"></a>【题目 4】基础安装[0.5 分]</h3><p>在控制节点和计算节点上分别安装 openstack-iaas 软件包，根据表 2 配置两个节点脚本文件中的基本变量（配置脚本文件为&#x2F;etc&#x2F;openstack&#x2F;openrc.sh）。</p>
<p><img src="C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20221012153852874.png" alt="image-20221012153852874"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查环境变量文件配置正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###0.提前准备</span></span><br><span class="line"><span class="comment">#分区</span></span><br><span class="line"><span class="comment">#在 compute 节点上利用空白分区划分 2个 20G 分区作为cinder与swift的存储</span></span><br><span class="line"><span class="comment">#划分1个5G的硬盘做为manila1的存储，见题目11</span></span><br><span class="line"><span class="comment">#划分1个5G的硬盘做为cinder扩展磁盘，见题目12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#安装openstack-iaas</span></span><br><span class="line">yum install -y openstack-iaas</span><br><span class="line"><span class="comment">###2.编辑环境变量，简化脚本</span></span><br><span class="line"><span class="comment">#使用vi底行模式，正则表达式如下</span></span><br><span class="line">:%s@##.*@@g	<span class="comment">#删除文件中开头##的所在行</span></span><br><span class="line">:%s@#@@g		<span class="comment">#删除文件中开头的#</span></span><br><span class="line">:g@^<span class="variable">$@d</span>		<span class="comment">#删除文件中所有的空行</span></span><br><span class="line">:%s/PASS=/PASS=000000/g  <span class="comment">#快速配置文件中个服务组件的password</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#环境变量文件示例</span></span><br><span class="line">HOST_IP=192.168.100.10		<span class="comment">#controller ip address，按照实际环境来</span></span><br><span class="line">HOST_PASS=000000</span><br><span class="line">HOST_NAME=controller</span><br><span class="line">HOST_IP_NODE=192.168.100.20		<span class="comment">#compute ip address，按照实际环境来</span></span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line">HOST_NAME_NODE=compute</span><br><span class="line">network_segment_IP=192.168.100.0/24		</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line">PLACEMENT_DBPASS=000000</span><br><span class="line">PLACEMENT_PASS=000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line">INTERFACE_NAME=ens34</span><br><span class="line">Physical_NAME=provider</span><br><span class="line">minvlan=1</span><br><span class="line">maxvlan=200</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line">BLOCK_DISK=sdb1</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line">OBJECT_DISK=sdb2</span><br><span class="line">STORAGE_LOCAL_NET_IP=192.168.100.20 	<span class="comment">#compute IP</span></span><br><span class="line">TROVE_DBPASS=000000</span><br><span class="line">TROVE_PASS=000000</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line">AODH_DBPASS=000000</span><br><span class="line">AODH_PASS=000000</span><br><span class="line">ZUN_DBPASS=000000</span><br><span class="line">ZUN_PASS=000000</span><br><span class="line">KURYR_PASS=000000</span><br><span class="line">OCTAVIA_DBPASS=000000</span><br><span class="line">OCTAVIA_PASS=000000</span><br><span class="line">MANILA_DBPASS=000000</span><br><span class="line">MANILA_PASS=000000</span><br><span class="line">SHARE_DISK=sdb3				    <span class="comment">#manila—Disk</span></span><br><span class="line">CLOUDKITTY_DBPASS=000000</span><br><span class="line">CLOUDKITTY_PASS=000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line">BARBICAN_PASS=000000</span><br><span class="line"></span><br><span class="line"><span class="comment">###首先执行初始化包###</span></span><br><span class="line">(all node)</span><br><span class="line">iaas-pre-host.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">###3.controller node执行</span></span><br><span class="line">iaas-install-mysql.sh &amp;&amp; iaas-install-keystone.sh &amp;&amp; iaas-install-glance.sh \</span><br><span class="line">&amp;&amp; iaas-install-placement.sh &amp;&amp; iaas-install-nova-controller.sh \</span><br><span class="line">&amp;&amp; iaas-install-neutron-controller.sh &amp;&amp; iaas-install-dashboard.sh \</span><br><span class="line">&amp;&amp; iaas-install-cinder-controller.sh &amp;&amp; iaas-install-swift-controller.sh  \</span><br><span class="line">&amp;&amp; iaas-install-heat.sh &amp;&amp; iaas-install-manila-controller.sh \</span><br><span class="line">&amp;&amp; iaas-install-cloudkitty.sh &amp;&amp; iaas-install-barbican.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">###4.compute node 执行</span></span><br><span class="line"><span class="comment">#提示：当控制节点在部署脚本的时候，计算节点也别闲着，可以为其安装相应的包</span></span><br><span class="line"><span class="built_in">cat</span> /usr/local/bin/iaas-*compute.sh | grep yum </span><br><span class="line"></span><br><span class="line"><span class="comment">#然后将如上罗列出来的内容全部安装后，等待controller节点的脚本执行后，执行如下内容</span></span><br><span class="line">iaas-install-nova-compute.sh  &amp;&amp; iaas-install-neutron-compute.sh \</span><br><span class="line">&amp;&amp; iaas-install-cinder-compute.sh &amp;&amp; iaas-install-swift-compute.sh \</span><br><span class="line">&amp;&amp; iaas-install-manila-compute.sh </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【题目-5】数据库安装与调优-0-5-分"><a href="#【题目-5】数据库安装与调优-0-5-分" class="headerlink" title="【题目 5】数据库安装与调优[0.5 分]"></a>【题目 5】数据库安装与调优[0.5 分]</h3><p>在 controller 节点上使用 iaas-install-mysql.sh 脚本安装 Mariadb、Memcached、RabbitMQ</p>
<p>等服务。安装服务完毕后，修改&#x2F;etc&#x2F;my.cnf 文件，完成下列要求：</p>
<p>1.设置数据库支持大小写；</p>
<p>2.设置数据库缓存 innodb 表的索引，数据，插入数据时的缓冲为 4G；</p>
<p>3.设置数据库的 log buffer 为 64MB；</p>
<p>4.设置数据库的 redo log 大小为 256MB；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查数据库配置正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mysql -uroot -p000000 -e <span class="string">&quot; show variables like &#x27;innodb_log%&#x27;;&quot;</span></span><br><span class="line">+-----------------------------+-----------+</span><br><span class="line">| Variable_name               | Value     |</span><br><span class="line">+-----------------------------+-----------+</span><br><span class="line">| innodb_log_buffer_size      | 67108864  |</span><br><span class="line">| innodb_log_checksums        | ON        |</span><br><span class="line">| innodb_log_compressed_pages | ON        |</span><br><span class="line">| innodb_log_file_size        | 268435456 |</span><br><span class="line">| innodb_log_files_in_group   | 2         |</span><br><span class="line">| innodb_log_group_home_dir   | ./        |</span><br><span class="line">| innodb_log_optimize_ddl     | ON        |</span><br><span class="line">| innodb_log_write_ahead_size | 8192      |</span><br><span class="line">+-----------------------------+-----------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br><span class="line"><span class="comment">#大小写敏感</span></span><br><span class="line">lower_case_table_names = 1</span><br><span class="line"><span class="comment">#缓存区</span></span><br><span class="line">innodb_buffer_pool_size = 4G</span><br><span class="line"><span class="comment">#设置数据库的 log buffer</span></span><br><span class="line">innodb_log_buffer_size = 64M</span><br><span class="line"><span class="comment">#InnoDB redo log大小</span></span><br><span class="line">innodb_log_file_size = 256M</span><br><span class="line"><span class="comment">#设置数据库的 redo log 文件组为 2</span></span><br><span class="line">innodb_log_files_in_group = 2</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">systemctl restart mariadb</span><br></pre></td></tr></table></figure>

<h3 id="【题目-6】Keystone-服务安装与使用-0-5-分"><a href="#【题目-6】Keystone-服务安装与使用-0-5-分" class="headerlink" title="【题目 6】Keystone 服务安装与使用[0.5 分]"></a>【题目 6】Keystone 服务安装与使用[0.5 分]</h3><p>在 controller 节点上使用 iaas-install-keystone.sh 脚本安装 Keystone 服务。安装完成后，使用相关命令，创建用户 chinaskill，密码为 000000。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 keystone 服务安装正确计 0.2 分</span><br><span class="line">2.检查 chinaskill 用户创建正确计 0.3 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack user show chinaskill</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field               | Value                            |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id           | default                          |</span><br><span class="line">| enabled             | True                             |</span><br><span class="line">| <span class="built_in">id</span>                  | f79373ccd5d34b34a023f18c5f181826 |</span><br><span class="line">| name                | chinaskill                       |</span><br><span class="line">| options             | &#123;&#125;                               |</span><br><span class="line">| password_expires_at | None                             |</span><br><span class="line">+---------------------+----------------------------------+</span><br></pre></td></tr></table></figure>

<p>过程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/keystone/admin-openrc.sh</span><br><span class="line"><span class="comment">#创建用户</span></span><br><span class="line">openstack user create chinaskill --password 000000</span><br><span class="line"><span class="comment">#查看是否创建成功</span></span><br><span class="line">openstack user show chinaskill</span><br></pre></td></tr></table></figure>

<h3 id="【题目-7】Glance-安装与使用-0-5-分"><a href="#【题目-7】Glance-安装与使用-0-5-分" class="headerlink" title="【题目 7】Glance 安装与使用[0.5 分]"></a>【题目 7】Glance 安装与使用[0.5 分]</h3><p>在 controller 节点上使用 iaas-install-glance.sh 脚本安装 glance 服务。使用命令将提供的 cirros-0.3.4-x86_64-disk.img 镜像（该镜像在 HTTP 服务中，可自行下载）上传至平台，命名为 cirros，并设置最小启动需要的硬盘为 10G，最小启动需要的内存为 1G。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 glance 服务安装正确计 0.1 分</span><br><span class="line">2.检查 cirros 镜像最小启动硬盘与内存配置正确计 0.4 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image show cirros</span><br><span class="line">+------------------+------------------------------------------------------------------------                                                                                             --------------------------------------------------------------------------------------------                                                                                             ------------------------+</span><br><span class="line">| Field            | Value                                                                                                                                                                                                                                                                                                                                                                                |</span><br><span class="line">+------------------+------------------------------------------------------------------------                                                                                             --------------------------------------------------------------------------------------------                                                                                             ------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                                                                                                                                                                                                                                                                                                                                                     |</span><br><span class="line">| container_format | bare                                                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| created_at       | 2022-10-12T08:42:35Z                                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| disk_format      | qcow2                                                                                                                                                                                                                                                                                                                                                                                |</span><br><span class="line">| file             | /v2/images/b757b50b-fd2c-4a42-9bff-31dcf0585917/file                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| <span class="built_in">id</span>               | b757b50b-fd2c-4a42-9bff-31dcf0585917                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| min_disk         | 10                                                                                                                                                                                                                                                                                                                                                                                   |</span><br><span class="line">| min_ram          | 1024                                                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| name             | cirros                                                                                                                                                                                                                                                                                                                                                                               |</span><br><span class="line">| owner            | ef3705db528144cc9a33f8ace06d6d3b                                                                                                                                                                                                                                                                                                                                                     |</span><br><span class="line">| properties       | os_hash_algo=<span class="string">&#x27;sha512&#x27;</span>, os_hash_value=<span class="string">&#x27;1b03ca1bc3fafe448b90583c12f367949                                                                                             f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bb                                                                                             db2&#x27;</span>, os_hidden=<span class="string">&#x27;False&#x27;</span> |</span><br><span class="line">| protected        | False                                                                                                                                                                                                                                                                                                                                                                                |</span><br><span class="line">| schema           | /v2/schemas/image                                                                                                                                                                                                                                                                                                                                                                    |</span><br><span class="line">| size             | 13287936                                                                                                                                                                                                                                                                                                                                                                             |</span><br><span class="line">| status           | active                                                                                                                                                                                                                                                                                                                                                                               |</span><br><span class="line">| tags             |                                                                                                                                                                                                                                                                                                                                                                                      |</span><br><span class="line">| updated_at       | 2022-10-12T08:43:47Z                                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| virtual_size     | None                                                                                                                                                                                                                                                                                                                                                                                 |</span><br><span class="line">| visibility       | shared                                                                                                                                                                                                                                                                                                                                                                               |</span><br><span class="line">+------------------+------------------------------------------------------------------------                                                                                             --------------------------------------------------------------------------------------------                                                                                             ------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建镜像</span></span><br><span class="line">openstack image create cirros --disk-format qcow2 --container bare --file /root/cirros-0.3.4-x86_64-disk.img</span><br><span class="line"><span class="comment">#设置镜像最小启动需要的硬盘为 10G，最小启动需要的内存为 1G</span></span><br><span class="line">openstack image <span class="built_in">set</span> cirros --min-disk 10 --min-ram 1024</span><br></pre></td></tr></table></figure>

<h3 id="【题目-8】Nova-安装与优化-0-5-分"><a href="#【题目-8】Nova-安装与优化-0-5-分" class="headerlink" title="【题目 8】Nova 安装与优化[0.5 分]"></a>【题目 8】Nova 安装与优化[0.5 分]</h3><p>在 controller 节点和 compute 节点上分别使用 iaas-install-placement.sh 脚本、iaas-install-nova -controller.sh 脚本、iaas-install-nova-compute.sh 脚本安装 Nova 服务。安装完成后，请修改 nova 相关配置文件，解决因等待时间过长而导致虚拟机启动超时从而获取不到 IP 地址而报错失败的问题。配置完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 nova 服务解决超时问题配置正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/nova/nova.conf |grep vif_plugging_is_fatal</span><br><span class="line">vif_plugging_is_fatal=<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf </span><br><span class="line">vif_plugging_is_fatal=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启nova服务</span></span><br><span class="line">systemctl restart openstack-nova*</span><br></pre></td></tr></table></figure>

<h3 id="【题目-9】Neutron-安装-0-5-分"><a href="#【题目-9】Neutron-安装-0-5-分" class="headerlink" title="【题目 9】Neutron 安装[0.5 分]"></a>【题目 9】Neutron 安装[0.5 分]</h3><p>使用提供的脚本 iaas-install-neutron-controller.sh 和 iaas-install-neutron-compute.sh，在controller 和 compute 节点上安装neutron 服务。完成后提交控制节点的用户名、密码和 IP地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 neutron 服务安装正确计 0.2 分</span><br><span class="line">2.检查 neutron 服务的 linuxbridge 网桥服务启动正确计 0.3 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack-service status | grep linuxbridge</span><br><span class="line">MainPID=17877 Id=neutron-linuxbridge-agent.service ActiveState=active</span><br></pre></td></tr></table></figure>

<h3 id="【题目-10】Doshboard-安装-0-5-分"><a href="#【题目-10】Doshboard-安装-0-5-分" class="headerlink" title="【题目 10】Doshboard 安装[0.5 分]"></a>【题目 10】Doshboard 安装[0.5 分]</h3><p>在controller节点上使用iaas-install-dashboad.sh脚本安装dashboad服务。安装完成后，将 Dashboard 中的 Djingo 数据修改为存储在文件中（此种修改解决了 ALL-in-one 快照在其他云平台 Dashboard 不能访问的问题）。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 Dashboard 服务安装正确计 0.2 分</span><br><span class="line">2.检查 Dashboard 服务中 Djingo 数据修改为存储在文件中配置正确计 0.3 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/openstack-dashboard/local_settings |grep django</span><br><span class="line">SESSION_ENGINE = <span class="string">&#x27;django.contrib.sessions.backends.file&#x27;</span></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/openstack-dashboard/local_settings</span><br><span class="line">SESSION_ENGINE = <span class="string">&#x27;django.contrib.sessions.backends.file&#x27;</span></span><br><span class="line"><span class="comment">#重启服务生效配置</span></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure>

<h3 id="【题目-11】Swift-安装-0-5-分"><a href="#【题目-11】Swift-安装-0-5-分" class="headerlink" title="【题目 11】Swift 安装[0.5 分]"></a>【题目 11】Swift 安装[0.5 分]</h3><p>在 控 制 节 点 和 计 算 节 点 上 分 别 使 用 iaas-install-swift-controller.sh 和iaas-install-swift-compute.sh 脚本安装 Swift 服务。安装完成后，使用命令创建一个名叫examcontainer 的容器，将 cirros-0.3.4-x86_64-disk.img 镜像上传到 examcontainer 容器中，并设置分段存放，每一段大小为 10M。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 swift 服务安装正确计 0.3 分</span><br><span class="line">2.分段上传 cirros 镜像正确计 0.2 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# swift <span class="built_in">stat</span> examcontainer  cirros-0.3.4-x86_64-disk.img</span><br><span class="line">               Account: AUTH_ef3705db528144cc9a33f8ace06d6d3b</span><br><span class="line">             Container: examcontainer</span><br><span class="line">                Object: cirros-0.3.4-x86_64-disk.img</span><br><span class="line">          Content Type: application/octet-stream</span><br><span class="line">        Content Length: 13287936</span><br><span class="line">         Last Modified: Wed, 12 Oct 2022 09:32:27 GMT</span><br><span class="line">                  ETag: <span class="string">&quot;5cde37512919eda28a822e472bb0a2dd&quot;</span></span><br><span class="line">              Manifest: examcontainer_segments/cirros-0.3.4-x86_64-disk.img/1665563891.781025/13287936/10485760/</span><br><span class="line">            Meta Mtime: 1665563891.781025</span><br><span class="line">         Accept-Ranges: bytes</span><br><span class="line">           X-Timestamp: 1665567146.81794</span><br><span class="line">            X-Trans-Id: tx47b60b986ef545d19e59d-00634689e7</span><br><span class="line">X-Openstack-Request-Id: tx47b60b986ef545d19e59d-00634689e7</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建examcontainer容器</span></span><br><span class="line">swift post examcontainer</span><br><span class="line"><span class="comment">#将镜像分段上传</span></span><br><span class="line">swift  upload examcontainer -S 10485760 cirros-0.3.4-x86_64-disk.img</span><br><span class="line"><span class="comment">#查看是否成功上传</span></span><br><span class="line"> swift <span class="built_in">stat</span> examcontainer  cirros-0.3.4-x86_64-disk.img</span><br></pre></td></tr></table></figure>

<h3 id="【题目-12】Cinder-创建硬盘-0-5-分"><a href="#【题目-12】Cinder-创建硬盘-0-5-分" class="headerlink" title="【题目 12】Cinder 创建硬盘[0.5 分]"></a>【题目 12】Cinder 创建硬盘[0.5 分]</h3><p>在 控 制 节 点 和 计 算 节 点 分 别 使 用 </p>
<p>iaas-install-cinder-controller.sh 、iaas-install-cinder-compute.sh 脚本安装 Cinder 服务，请在计算节点，对块存储进行扩容操作，即在计算节点再分出一个 5G 的分区，加入到 cinder 块存储的后端存储中去。完成后提交计算节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 cinder 后端存储扩容成功计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vgdisplay</span><br><span class="line">--- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  5</span><br><span class="line">  VG Access             <span class="built_in">read</span>/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               49.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              12798</span><br><span class="line">  Alloc PE / Size       9748 / &lt;38.08 GiB</span><br><span class="line">  Free  PE / Size       3050 / 11.91 GiB</span><br><span class="line">  VG UUID               DgfDCG-y8uU-Slr0-V9J5-jw1H-nrsT-SokTeh</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建物理卷</span></span><br><span class="line">pvcreate /dev/sdc2</span><br><span class="line"><span class="comment">#扩展</span></span><br><span class="line">vgextend cinder-volumes /dev/sdc2</span><br></pre></td></tr></table></figure>



<h3 id="【题目-13】Manila-服务安装与使用-0-5-分"><a href="#【题目-13】Manila-服务安装与使用-0-5-分" class="headerlink" title="【题目 13】Manila 服务安装与使用[0.5 分]"></a>【题目 13】Manila 服务安装与使用[0.5 分]</h3><p>在 控 制 和 计 算 节 点 上 分 别 使 用 </p>
<p>iaas-install-manila-controller.sh 和iaas-install-manila-compute.sh 脚本安装 manila 服务。安装服务后创建 default_share_type 共享类型（不使用驱动程序支持），接着创建一个大小为 2G 的共享存储名为 share01 并开放share01 目录对 OpenStack 管理网段使用权限。最后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 share01 共享存储正确创建并赋予权限计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# manila type-list</span><br><span class="line">+--------------------------------------+--------------------+------------+-----------                                                                                                    -+--------------------------------------+----------------------+-------------+</span><br><span class="line">| ID                                   | Name               | visibility | is_default                                                                                                     | required_extra_specs                 | optional_extra_specs | Description |</span><br><span class="line">+--------------------------------------+--------------------+------------+-----------                                                                                                    -+--------------------------------------+----------------------+-------------+</span><br><span class="line">| 11caa227-7ae2-40cf-bdd1-54ca6712dc5e | default_share_type | public     | YES                                                                                                            | driver_handles_share_servers : False |                      | None        |</span><br><span class="line">+--------------------------------------+--------------------+------------+-----------                                                                                                    -+--------------------------------------+----------------------+-------------+</span><br><span class="line">[root@controller ~]# manila list</span><br><span class="line">+--------------------------------------+---------+------+-------------+-----------+--                                                                                                    ---------+--------------------+-----------------------------+-------------------+</span><br><span class="line">| ID                                   | Name    | Size | Share Proto | Status    | I                                                                                                    s Public | Share Type Name    | Host                        | Availability Zone |</span><br><span class="line">+--------------------------------------+---------+------+-------------+-----------+--                                                                                                    ---------+--------------------+-----------------------------+-------------------+</span><br><span class="line">| b8e66c11-64e3-48f3-aed0-ca474aa57537 | share01 | 2    | NFS         | available | F                                                                                                    alse     | default_share_type | compute@lvm#lvm-single-pool | nova              |</span><br><span class="line">+--------------------------------------+---------+------+-------------+-----------+--                                                                                                    ---------+--------------------+-----------------------------+-------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建共享类型（不使用驱动程序支持）</span></span><br><span class="line">manila type-create default_share_type False</span><br><span class="line"><span class="comment">#创建一个大小为 2G 的共享存储名为 share01 并开放share01 目录对 OpenStack 管理网段使用权限</span></span><br><span class="line"> manila   create NFS 2 --name share01</span><br><span class="line"> manila access-allow share01 ip 192.168.100.0/24 --access-level rw</span><br></pre></td></tr></table></figure>

<h3 id="【题目-14】Barbican-服务安装与使用-0-5-分"><a href="#【题目-14】Barbican-服务安装与使用-0-5-分" class="headerlink" title="【题目 14】Barbican 服务安装与使用[0.5 分]"></a>【题目 14】Barbican 服务安装与使用[0.5 分]</h3><p>使用 iaas-install-barbican.sh 脚本安装 barbican 服务，安装服务完毕后，使用 openstack命令创建一个名为 secret01 的密钥，创建完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 secret01 密钥创建正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack secret list</span><br><span class="line">+------------------------------------------------------------------------+----------+---------------------------+--------+-----------------------------+-----------+------------+-------------+------+------------+</span><br><span class="line">| Secret href                                                            | Name     | Created                   | Status | Content types               | Algorithm | Bit length | Secret <span class="built_in">type</span> | Mode | Expiration |</span><br><span class="line">+------------------------------------------------------------------------+----------+---------------------------+--------+-----------------------------+-----------+------------+-------------+------+------------+</span><br><span class="line">| http://controller:9311/v1/secrets/3ffdbd31-b33e-4298-b8c8-104601cd4a72 | secret01 | 2022-10-13T01:45:56+00:00 | ACTIVE | &#123;u<span class="string">&#x27;default&#x27;</span>: u<span class="string">&#x27;text/plain&#x27;</span>&#125; | aes       |        256 | opaque      | cbc  | None       |</span><br><span class="line">+------------------------------------------------------------------------+----------+---------------------------+--------+-----------------------------+-----------+------------+-------------+------+------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openstack secret store --name secret01 --payload secretkey</span><br></pre></td></tr></table></figure>

<h3 id="【题目-15】Cloudkitty-服务安装与使用-1-分"><a href="#【题目-15】Cloudkitty-服务安装与使用-1-分" class="headerlink" title="【题目 15】Cloudkitty 服务安装与使用[1 分]"></a>【题目 15】Cloudkitty 服务安装与使用[1 分]</h3><p>使用 iaas-install-cloudkitty.sh 脚本安装 cloudkitty 服务，安装完毕后，启用 hashmap 评级模块，接着创建 volume_thresholds 组，创建服务匹配规则 volume.size，并设置每 GB 的价格为 0.01。接下来对应大量数据设置应用折扣，在组 volume_thresholds 中创建阈值，设置若超过 50GB 的阈值，应用 2%的折扣（0.98）。设置完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 hashmap 评级模块启用成功计 0.2 分</span><br><span class="line">2.检查服务匹配规则 volume.size 创建成功 0.8 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cloudkitty hashmap service list</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| Name        | Service ID                           |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| volume.size | 8e4db95b-45ae-44fd-87d5-424b0aac9614 |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">[root@controller ~]#  openstack rating module <span class="built_in">enable</span> hashmap</span><br><span class="line">+---------+---------+----------+</span><br><span class="line">| Module  | Enabled | Priority |</span><br><span class="line">+---------+---------+----------+</span><br><span class="line">| hashmap | True    |        1 |</span><br><span class="line">+---------+---------+----------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动评级模块</span></span><br><span class="line">openstack rating module <span class="built_in">enable</span> hashmap</span><br><span class="line"><span class="comment">#创建组</span></span><br><span class="line"> cloudkitty hashmap group   create volume_thresholds</span><br><span class="line"> +-------------------+--------------------------------------+</span><br><span class="line">| Name              | Group ID                             |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line">| volume_thresholds | cac489fd-58b8-4de8-a4d3-08a0db1aa3d8 |</span><br><span class="line">+-------------------+--------------------------------------+</span><br><span class="line"><span class="comment">#创建服务</span></span><br><span class="line">cloudkitty hashmap service create volume.size</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| Name        | Service ID                           |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| volume.size | 8e4db95b-45ae-44fd-87d5-424b0aac9614 |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line"><span class="comment">#创建匹配规则</span></span><br><span class="line">cloudkitty hashmap mapping create -s 8e4db95b-45ae-44fd-87d5-424b0aac9614 -t flat  -g cac489fd-58b8-4de8-a4d3-08a0db1aa3d8 0.01</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| Mapping ID                           | Value | Cost       | Type | Field ID | Service ID                           | Group ID                             | Project ID |</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| 65f9489f-035e-4bf7-8cf6-664fde0ca446 | None  | 0.01000000 | flat | None     | 8e4db95b-45ae-44fd-87d5-424b0aac9614 | cac489fd-58b8-4de8-a4d3-08a0db1aa3d8 | None       |</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line"><span class="comment">#创建阈值</span></span><br><span class="line">cloudkitty hashmap threshold create -s8e4db95b-45ae-44fd-87d5-424b0aac9614 -g cac489fd-58b8-4de8-a4d3-08a0db1aa3d8 -t rate 50 0.98</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| Threshold ID                         | Level       | Cost       | Type | Field ID | Service ID                           | Group ID                             | Project ID |</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| 3f5a8dfe-2ed8-4e1b-b617-a5bc7ef8a187 | 50.00000000 | 0.98000000 | rate | None     | 8e4db95b-45ae-44fd-87d5-424b0aac9614 | cac489fd-58b8-4de8-a4d3-08a0db1aa3d8 | None       |</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【题目-16】OpenStack-平台内存优化-0-5-分"><a href="#【题目-16】OpenStack-平台内存优化-0-5-分" class="headerlink" title="【题目 16】OpenStack 平台内存优化[0.5 分]"></a>【题目 16】OpenStack 平台内存优化[0.5 分]</h3><p>搭建完 OpenStack 平台后，关闭系统的内存共享，打开透明大页。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查系统内存优化成功计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line">always madvise [never]</span><br></pre></td></tr></table></figure>

<p>过程</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;never&#x27;</span> &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line"><span class="built_in">cat</span> /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line"> always madvise [never]</span><br></pre></td></tr></table></figure>

<h3 id="【题目-17】修改文件句柄数-0-5-分"><a href="#【题目-17】修改文件句柄数-0-5-分" class="headerlink" title="【题目 17】修改文件句柄数[0.5 分]"></a>【题目 17】修改文件句柄数[0.5 分]</h3><p>Linux 服务器大并发时，往往需要预先调优 Linux 参数。默认情况下，Linux 最大文件句柄数为 1024 个。当你的服务器在大并发达到极限时，就会报出“too many open files”。创建一台云主机，修改相关配置，将控制节点的最大文件句柄数永久修改为 65535。配置完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查配置 linux 系统句柄数为 65535 成功计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#临时生效</span></span><br><span class="line"><span class="built_in">ulimit</span> -n 65535</span><br><span class="line"><span class="comment">#永久生效</span></span><br><span class="line">vi /etc/security/limits.conf</span><br><span class="line">* soft nofile 65535</span><br><span class="line">* hard nofile 65535</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line"><span class="built_in">ulimit</span> -n</span><br></pre></td></tr></table></figure>

<h3 id="【题目-18】Linux-系统调优-防止-SYN-攻击-1-分"><a href="#【题目-18】Linux-系统调优-防止-SYN-攻击-1-分" class="headerlink" title="【题目 18】Linux 系统调优-防止 SYN 攻击[1 分]"></a>【题目 18】Linux 系统调优-防止 SYN 攻击[1 分]</h3><p>修改 controller 节点的相关配置文件，开启 SYN cookie，防止 SYN 洪水攻击。完成后提交 controller 节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查开启 SYN cookie 配置计 1 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br><span class="line">net.ipv4.tcp_max_syn_backlog=2048</span><br><span class="line">net.ipv4.tcp_syncookies=1</span><br><span class="line">net.ipv4.tcp_syn_retries = 0</span><br><span class="line"><span class="comment">#配置生效</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>

<h2 id="【任务-2】私有云服务运维-10分"><a href="#【任务-2】私有云服务运维-10分" class="headerlink" title="**【任务 **2】私有云服务运维[10分]"></a>**【任务 **2】私有云服务运维[10分]</h2><h3 id="【题目-1】OpenStack-开放镜像权限-0-5-分"><a href="#【题目-1】OpenStack-开放镜像权限-0-5-分" class="headerlink" title="【题目 1】OpenStack 开放镜像权限[0.5 分]"></a>【题目 1】OpenStack 开放镜像权限[0.5 分]</h3><p>使 用 OpenStack 私 有 云 平 台 ， 在 OpenStack 平台的 admin 项 目 中 使 用cirros-0.3.4-x86_64-disk.img 镜像文件创建名为 glance-cirros 的镜像，通过 OpenStack 命令将glance-cirros 镜像指定 demo 项目进行共享使用。配置完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 glance-cirros 镜像权限开放正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image add project glance-cirros demo</span><br><span class="line">+------------+--------------------------------------+</span><br><span class="line">| Field      | Value                                |</span><br><span class="line">+------------+--------------------------------------+</span><br><span class="line">| created_at | 2022-10-13T03:55:11Z                 |</span><br><span class="line">| image_id   | 5e98f80e-34a0-40f7-981a-ef35bb3d673c |</span><br><span class="line">| member_id  | cc5b38915a0343368e9e7b7560eeb6ca     |</span><br><span class="line">| schema     | /v2/schemas/member                   |</span><br><span class="line">| status     | pending                              |</span><br><span class="line">| updated_at | 2022-10-13T03:55:11Z                 |</span><br><span class="line">+------------+--------------------------------------+</span><br></pre></td></tr></table></figure>

<p>过程：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上传镜像</span></span><br><span class="line">openstack image create glance-cirros --disk-format qcow2 --container bare --file cirros-0.3.4-x86_64-disk.img --project admin</span><br><span class="line"><span class="comment">#对demo项目进行共享使用</span></span><br><span class="line">openstack image add project glance-cirros demo</span><br></pre></td></tr></table></figure>

<h3 id="【题目-2】OpenStack-消息队列调优-0-5-分"><a href="#【题目-2】OpenStack-消息队列调优-0-5-分" class="headerlink" title="【题目 2】OpenStack 消息队列调优[0.5 分]"></a>【题目 2】OpenStack 消息队列调优[0.5 分]</h3><p>OpenStack 各服务内部通信都是通过 RPC 来交互，各 agent 都需要去连接 RabbitMQ；随着各服务 agent 增多，MQ 的连接数会随之增多，最终可能会到达上限，成为瓶颈。使用自行搭建的OpenStack私有云平台，分别通过用户级别、系统级别、配置文件来设置RabbitMQ服务的最大连接数为 10240，配置完成后提交修改节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 rabbitmq 服务最大连接数正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/memcached</span><br><span class="line">MAXCONN=&quot;10240&quot; </span><br><span class="line"></span><br><span class="line">#重启服务</span><br><span class="line">systemctl restart mecached</span><br></pre></td></tr></table></figure>

<h3 id="【题目-3】OpenStack-Glance-镜像压缩-0-5-分"><a href="#【题目-3】OpenStack-Glance-镜像压缩-0-5-分" class="headerlink" title="【题目 3】OpenStack Glance 镜像压缩[0.5 分]"></a>【题目 3】OpenStack Glance 镜像压缩[0.5 分]</h3><p>使用自行搭建的 OpenStack 平台。在 HTTP 服务中存在一个镜像为CentOS7.5-compress.qcow2 的镜像，请使用 qemu 相关命令，对该镜像进行压缩，压缩后的镜像命名为 chinaskill-js-compress.qcow2 并存放在&#x2F;root 目录下。完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查镜像压缩正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-img  convert -c -O qcow2 CentOS7.5-compress.qcow2 /root/chinaskill-js-compress.qcow2</span><br></pre></td></tr></table></figure>

<h3 id="【题目-4】glance-对接-cinder-后端存储-0-5-分"><a href="#【题目-4】glance-对接-cinder-后端存储-0-5-分" class="headerlink" title="【题目 4】glance 对接 cinder 后端存储[0.5 分]"></a>【题目 4】glance 对接 cinder 后端存储[0.5 分]</h3><p>在自行搭建的 OpenStack平台中修改相关参数，使 glance 可以使用 cinder作为后端存储，将镜像存储于 cinder 卷中。使用 cirros-0.3.4-x86_64-disk.img 文件创建 cirros-image 镜像存储于 cirros-cinder 卷中，通过 cirros-image 镜像使用 cinder 卷启动盘的方式进行创建虚拟机。完成后提交修改节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查修改 glance 后端存储为 cinder 正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">controller</span> ~]<span class="comment"># vi /etc/glance/glance-api.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#show_multiple_locations = false</span></span><br><span class="line"></span><br><span class="line">改为</span><br><span class="line">show_multiple_locations = true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">controller</span> ~]<span class="comment"># systemctl restart openstack-glance-*</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">controller</span> ~]<span class="comment"># vi /etc/cinder/cinder.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#allowed_direct_url_schemes =</span></span><br><span class="line">改为</span><br><span class="line">allowed_direct_url_schemes =cinder</span><br><span class="line"></span><br><span class="line"><span class="comment">#image_upload_use_internal_tenant = false</span></span><br><span class="line">改为</span><br><span class="line">image_upload_use_internal_tenant = true</span><br><span class="line"><span class="comment">#最后重启cinder</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">controller</span> ~]<span class="comment"># systemctl restart openstack-cinderack-cinder-scheduler.service httpd</span></span><br><span class="line"></span><br><span class="line">代码不全,还差一些操作,只有一半的分</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【题目-5】OpenStack-Heat-运维：创建容器-0-5-分"><a href="#【题目-5】OpenStack-Heat-运维：创建容器-0-5-分" class="headerlink" title="【题目 5】OpenStack Heat 运维：创建容器[0.5 分]"></a>【题目 5】OpenStack Heat 运维：创建容器[0.5 分]</h3><p>在自行搭建的 OpenStack 私 有 云 平 台 上 ， 在 &#x2F;root 目录下编写 Heat 模 板create_container.yaml，要求执行 yaml 文件可以创建名为 heat-swift 的容器。完成后提交控制节点的用户名、密码和 IP 地址到答题框。（在提交信息前请准备好 yaml 模板执行的环境）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.执行 heat 模板文件成功创建容器计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> create_container.yaml</span><br><span class="line"></span><br><span class="line">heat_template_version: <span class="number">2018</span><span class="literal">-08-31</span></span><br><span class="line">description: create container</span><br><span class="line">resources:</span><br><span class="line">  user:</span><br><span class="line">    <span class="built_in">type</span>: OS::Swift::Container</span><br><span class="line">    properties:</span><br><span class="line">      name: heat<span class="literal">-swift</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#运行模板测试</span></span><br><span class="line">heat stack<span class="literal">-create</span> <span class="operator">-f</span> create_container.yaml  heat<span class="literal">-swift</span></span><br></pre></td></tr></table></figure>

<h3 id="【题目-6】OpenStack-Nova-清除缓存-0-5-分"><a href="#【题目-6】OpenStack-Nova-清除缓存-0-5-分" class="headerlink" title="【题目 6】OpenStack Nova 清除缓存[0.5 分]"></a>【题目 6】OpenStack Nova 清除缓存[0.5 分]</h3><p>在 OpenStack 平台的一台计算节点创建虚拟机，若是第一次在该节点创建次虚拟机，会先将镜像文件复制到该计算节点录&#x2F;var&#x2F;lib&#x2F;nova&#x2F;instances&#x2F;_base。长期下来，该目录会占用比较大的磁盘空间而要清理。可以通过修改 nova 的配置文件来自动清理该缓存目录，即在该节点没有使用某镜像启动的云主机，那么这个镜像在过一定的时间后会被自动删除。配置完成后提交改动节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 nova 配置自动清理缓存文件正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line">[<span class="type">DEFAULT</span>]]</span><br><span class="line">remove_unused_base_images=true</span><br><span class="line">image_cache_manager_interval=<span class="number">2400</span></span><br><span class="line">remove_unused_original_minimum_age_seconds=<span class="number">86400</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【题目-7】Redis-一主二从三哨兵模式-1-分"><a href="#【题目-7】Redis-一主二从三哨兵模式-1-分" class="headerlink" title="【题目 7】Redis 一主二从三哨兵模式[1 分]"></a>【题目 7】Redis 一主二从三哨兵模式[1 分]</h3><p>使用提供的 OpenStack 私有云平台，申请三台 CentOS7.9 系统的云主机，使用提供的http 源，在三个节点自行安装 Redis 服务并启动，配置 Redis 的访问需要密码，密码设置为123456。然后将这三个 Redis 节点配置为 Redis 的一主二从三哨兵架构，即一个 Redis 主节点，两个从节点，三个节点均为哨兵节点。配置完成后提交 Redis 主节点的用户名、密码和IP 地址到答题框。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查 redis 主从集群部署正确计 0.5 分</span><br><span class="line">2.检查 redis 集群部署为哨兵节点正确计 0.5 分</span><br></pre></td></tr></table></figure>

<p>过程：</p>
<p><strong>配置主从</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装redis</span></span><br><span class="line">yum install -y redis </span><br><span class="line"><span class="comment">#修改配置文件/etc/redis.conf</span></span><br><span class="line">1.先在网络部分注释掉单机连接那一行,即注释掉<span class="built_in">bind</span> 127.0.0.1 </span><br><span class="line">2.同样我们要将后台运行打开：daemonize no，设置为<span class="built_in">yes</span>。</span><br><span class="line">3.将 保护模式关闭：protected-mode <span class="built_in">yes</span> 改为：protected-mode no </span><br><span class="line"></span><br><span class="line">4.打开RDB持久化配置：</span><br><span class="line"><span class="comment">#RDB持久化策略 默认三种方式，[900秒内有1次修改],</span></span><br><span class="line"><span class="comment">#[300秒内有10次修改],[60秒内有10000次修改]即触发RDB持久化，</span></span><br><span class="line"><span class="comment">#我们可以手动修改该参数或新增策略</span></span><br><span class="line">save 900 1</span><br><span class="line">save 300 10</span><br><span class="line">save 60 10000 </span><br><span class="line"><span class="comment">#RDB文件名</span></span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"><span class="comment">#RDB文件存储路径</span></span><br><span class="line"><span class="built_in">dir</span> ./</span><br><span class="line">策略配置：</span><br><span class="line"><span class="comment">#在seconds秒内有changes次数据修改就触发RDB持久化</span></span><br><span class="line"></span><br><span class="line">5.开启AOF持久化配置</span><br><span class="line">appendonly <span class="built_in">yes</span></span><br><span class="line"><span class="comment">#AOF文件名</span></span><br><span class="line">appendfilename <span class="string">&quot;appendonly.aof&quot;</span></span><br><span class="line"><span class="comment">#AOF文件存储路径 与RDB是同一个参数,共用一个文件路径</span></span><br><span class="line"><span class="built_in">dir</span> ./  <span class="comment">#即bin目录下</span></span><br><span class="line"><span class="comment">#AOF策略，一般都是选择第一种[always:每个命令都记录],</span></span><br><span class="line"><span class="comment">#[everysec:每秒记录一次],[no:看机器的心情高兴了就记录，linux一般半个小时同步一次]</span></span><br><span class="line"><span class="comment">#appendfsync always</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="comment"># appendfsync no</span></span><br><span class="line"><span class="comment">#aof文件大小比起上次重写时的大小,增长100%(配置可以大于100%)时,触发重写。</span></span><br><span class="line"><span class="comment">#[假如上次重写后大小为10MB，当AOF文件达到20MB时也会再次触发重写，以此类推</span></span><br><span class="line">auto-aof-rewrite-percentage 100 </span><br><span class="line"><span class="comment">#aof文件大小超过64MB*2时,触发重写，</span></span><br><span class="line"><span class="comment">#为何要乘以2，因为auto-aof-rewrite-percentage 100 是翻倍即100%，</span></span><br><span class="line"><span class="comment">#达到翻倍时才重写</span></span><br><span class="line">auto-aof-rewrite-min-size 64mb </span><br><span class="line">6.打开混合持久化：</span><br><span class="line"><span class="comment">#6.aof-use-rdb-preamble yes # 检查混合持久化是否打开，redis5.0后默认开启</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将修改后的配置文件传到其他节点</span></span><br><span class="line">scp /etc/redis.conf root@slave1:/etc/redis.conf</span><br><span class="line">scp /etc/redis.conf root@slave2:/etc/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动redis将slave各节点配置成从机</span></span><br><span class="line">systemctl start redis</span><br><span class="line"> <span class="comment">#配置slave1</span></span><br><span class="line">redis-cli -p 6379</span><br><span class="line">&gt; slaveof 192.168.200.101 6379</span><br><span class="line">&gt; info replication</span><br><span class="line"> <span class="comment">#配置slave2</span></span><br><span class="line"> redis-cli -p 6379</span><br><span class="line">&gt; slaveof 192.168.200.101 6379</span><br><span class="line">&gt; info replication</span><br><span class="line"></span><br><span class="line"><span class="comment">#主节点查看配置是否成功</span></span><br><span class="line">redis-cli -p 6379</span><br><span class="line">&gt;info replication</span><br></pre></td></tr></table></figure>

<p><strong>配置三哨兵</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压压缩包</span></span><br><span class="line">tar -zxvf redis-5.0.7.tar.gz -C /opt</span><br><span class="line"><span class="comment">#修改配置文件</span></span><br><span class="line">vim /opt/redis-5.0.7/sentinel.conf</span><br><span class="line">protected-mode no								<span class="comment">#17行，关闭保护模式</span></span><br><span class="line">port 26379										<span class="comment">#21行，Redis哨兵默认的监听端口</span></span><br><span class="line">daemonize <span class="built_in">yes</span>									<span class="comment">#26行，指定sentinel为后台启动</span></span><br><span class="line">logfile <span class="string">&quot;/var/log/sentinel.log&quot;</span>					<span class="comment">#36行，指定日志存放路径</span></span><br><span class="line"><span class="built_in">dir</span> <span class="string">&quot;/var/lib/redis/6379&quot;</span>						<span class="comment">#65行，指定数据库存放路径（没有这个文件夹需要手动创建）</span></span><br><span class="line">sentinel monitor mymaster 192.168.154.19 6379 2	<span class="comment">#84行，修改 指定该哨兵节点监控192.168.184.10:6379这个主节点，该主节点的名称是mymaster，最后的2的含义与主节点的故障判定有关：至少需要2个哨兵节点同意，才能判定主节点故障并进行故障转移</span></span><br><span class="line">sentinel down-after-milliseconds mymaster 30000	<span class="comment">#113行，判定服务器down掉的时间周期，默认30000毫秒（30秒）</span></span><br><span class="line">sentinel failover-timeout mymaster 180000		<span class="comment">#146行，故障节点的最大超时时间为180000（180秒）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动哨兵</span></span><br><span class="line"><span class="built_in">cd</span> /opt/redis-5.0.7/</span><br><span class="line">redis-sentinel sentinel.conf &amp;</span><br><span class="line"><span class="comment">#注意！先启动主服务器，再启动从服务器</span></span><br><span class="line"><span class="comment">#查看信息</span></span><br><span class="line">redis-cli -p 26379 info Sentinel</span><br><span class="line"><span class="comment"># Sentinel</span></span><br><span class="line">sentinel_masters:1</span><br><span class="line">sentinel_tilt:0</span><br><span class="line">sentinel_running_scripts:0</span><br><span class="line">sentinel_scripts_queue_length:0</span><br><span class="line">sentinel_simulate_failure_flags:0</span><br><span class="line">master0:name=mymaster,status=ok,address=192.168.58.30:6379,slaves=2,sentinels=3</span><br><span class="line">[1]+  完成                  redis-sentinel sentinel.conf</span><br></pre></td></tr></table></figure>



<h3 id="【题目-8】Redis-服务调优-AOF-1-分"><a href="#【题目-8】Redis-服务调优-AOF-1-分" class="headerlink" title="【题目 8】Redis 服务调优-AOF[1 分]"></a>【题目 8】Redis 服务调优-AOF[1 分]</h3><p>使用上一题安装的 Redis 服务。在 Redis 中，AOF 配置为以三种不同的方式在磁盘上执行 write 或者 fsync。假设当前 Redis 压力过大，请配置 Redis 不执行 fsync。除此之外，避免AOF 文件过大，Redis 会进行 AOF 重写，生成缩小的 AOF 文件。请修改配置，让 AOF 重写时，不进行 fsync 操作。配置完成后提交 Redis 节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.检查配置 redis 不执行 fsync 正确计 0.5 分、</span><br><span class="line">2.检查配置 redis 进行 AOF 重写不执行 fsync 正确计 0.5 分</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">master</span> ~]<span class="comment"># vim /etc/redis.conf</span></span><br><span class="line"></span><br><span class="line">no<span class="literal">-appendfsync-on-rewrite</span> no</span><br><span class="line">aof<span class="literal">-rewrite-incremental-fsync</span> yes</span><br><span class="line"></span><br><span class="line"><span class="comment">#连个参数分别改为</span></span><br><span class="line"></span><br><span class="line">aof<span class="literal">-rewrite-incremental-fsync</span> no</span><br><span class="line">no<span class="literal">-appendfsync-on-rewrite</span> yes</span><br><span class="line"><span class="comment">#配置就是设置为yes时候，在aof重写期间会停止aof的fsync操作</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">master</span> ~]<span class="comment"># systemctl restart redis</span></span><br></pre></td></tr></table></figure>

<h3 id="【题目-9】应用部署：堡垒机部署-0-5-分"><a href="#【题目-9】应用部署：堡垒机部署-0-5-分" class="headerlink" title="【题目 9】应用部署：堡垒机部署[0.5 分]"></a>【题目 9】应用部署：堡垒机部署[0.5 分]</h3><p>使用提供的 OpenStack 平台申请一台 CentOS7.9 的云主机，使用提供的软件包安装JumpServer 堡垒机服务，并配置使用该堡垒机对接自己安装的 controller 和 compute 节点。完成后提交 JumpServer 节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查堡垒机部署正确计 0.5 分</span><br></pre></td></tr></table></figure>

<h3 id="【题目-10】skywalking-服务部署与应用-1-分"><a href="#【题目-10】skywalking-服务部署与应用-1-分" class="headerlink" title="【题目 10】skywalking 服务部署与应用[1 分]"></a>【题目 10】skywalking 服务部署与应用[1 分]</h3><p>使用提供的 OpenStack 私有云平台，申请一台 centos7.9 系统的云主机，使用提供的软件包安装 Elasticsearch 服务和 skywalking 服务，将 skywalking 的 UI 访问端口修改为 8888。接下来再申请一台CentOS7.9 的云主机，用于搭建gpmall 商城应用，并配置SkyWalking Agent， 将 gpmall 的 jar 包放置探针并启动。安装与配置完成后提交 skywalking 节点的用户名、密码和 IP 地址到答题框。登录物理OpenStack平台，使用CentOS7.9镜像创建两台云主机（node-1，mall），云主机类型使用4VCPU&#x2F;8GB内存&#x2F;100GB硬盘。创建后的云主机作为本次案例的实验节点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.检查 skywalking 服务部署正确计 1 分</span><br></pre></td></tr></table></figure>



<h3 id="【题目-11】Linux-内核优化-1-分"><a href="#【题目-11】Linux-内核优化-1-分" class="headerlink" title="【题目 11】Linux 内核优化[1 分]"></a>【题目 11】Linux 内核优化[1 分]</h3><p>在使用 Linux 服务器的时候，TCP 协议规定，对于已经建立的连接，网络双方要进行四次挥手才能成功断开连接，如果缺少了其中某个步骤，将会使连接处于假死状态，连接本身占用的资源不会被释放。因为服务器程序要同时管理大量连接，所以很有必要保证无用的连接完全断开，否则大量僵死的连接会浪费许多服务器资源。创建一台 CentOS7.9 云主机，修改相应的配置文件，分别开启 SYN Cookies；允许将 TIME-WAIT sockets 重新用于新的 TCP 连接；开启TCP 连接中TIME-WAIT sockets 的快速回收；修改系統默认的 TIMEOUT 时间为 30。完成后提交修改节点的用户名、密码和 IP 地址到答题框。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加如下参数</span></span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_fin_timeout = 30</span><br><span class="line"></span><br><span class="line">sysctl -p</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_fin_timeout = 30</span><br></pre></td></tr></table></figure>

<h2 id="【任务-3】私有云运维开发-10-分"><a href="#【任务-3】私有云运维开发-10-分" class="headerlink" title="【任务 3】私有云运维开发[10 分]"></a>【任务 3】私有云运维开发[10 分]</h2><h3 id="【题目-1】Ansible-服务部署：部署-MariaDB-集群-2-分"><a href="#【题目-1】Ansible-服务部署：部署-MariaDB-集群-2-分" class="headerlink" title="【题目 1】Ansible 服务部署：部署 MariaDB 集群[2 分]"></a>【题目 1】Ansible 服务部署：部署 MariaDB 集群[2 分]</h3><p>使用OpenStack 私有云平台，创建 4 台系统为centos7.9 的云主机，其中一台作为 Ansible 的母机并命名为 ansible，另外三台云主机命名为 node1、node2、node3；使用这一台母机， 编写 Ansible 脚本（在&#x2F;root 目录下创建 example 目录作为 Ansible 工作目录，部署的入口文件命名为 cscc_install.yaml ） ， 对其他三台云主机进行安装高可用数据库集群<br>（MariaDB_Galera_cluster，数据库密码设置为 123456）的操作（所需的安装包在 HTTP 服务中）。完成后提交 Ansible 节点的用户名、密码和 IP 地址到答题框。（考试系统会连接到你的Ansible 节点，去执行 Ansible 脚本，请准备好 Ansible 运行环境，以便考试系统访问）</p>
<p>（1）环境准备</p>
<h4 id="①ansible部署"><a href="#①ansible部署" class="headerlink" title="①ansible部署"></a>①ansible部署</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.创建工作目录</span></span><br><span class="line"><span class="built_in">mkdir</span> example</span><br><span class="line"><span class="built_in">cd</span> example</span><br><span class="line"></span><br><span class="line">vi ansible.cfg</span><br><span class="line">[defaults]</span><br><span class="line">inventory = /root/example/inventory   <span class="comment">###声明主机组</span></span><br><span class="line">remote_user = root</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建主机组</span></span><br><span class="line">vi inventory  <span class="comment">###设置主机组，便于后面“when模块”进行筛选使用</span></span><br><span class="line">[node1]</span><br><span class="line">node1</span><br><span class="line">[node2]</span><br><span class="line">node2</span><br><span class="line">[node3]</span><br><span class="line">node3</span><br><span class="line"></span><br><span class="line"><span class="comment">#将公钥进行上传</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.创建roles目录，编写playbook</span></span><br><span class="line"> <span class="built_in">mkdir</span> roles</span><br><span class="line"> <span class="built_in">cd</span> roles/</span><br><span class="line"> <span class="comment">#生成role</span></span><br><span class="line"> ansible-galaxy init mariadb-galera-cluster</span><br><span class="line"> <span class="built_in">cd</span> mariadb-galera-cluster</span><br><span class="line"> </span><br><span class="line"> <span class="comment">#编写file</span></span><br><span class="line"> <span class="built_in">cd</span> files</span><br><span class="line"> <span class="comment">#vi mariadb.repo</span></span><br><span class="line">[mariadb]</span><br><span class="line">name = MariaDB</span><br><span class="line">baseurl = http://yum.mariadb.org/10.4/centos7-amd64</span><br><span class="line">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span><br><span class="line">gpgcheck=1</span><br><span class="line"></span><br><span class="line"> <span class="comment">#vi server1.cnf(需要创建三个server1,server2,server3，把&quot;wsrep_node_name=&quot;,“wsrep_node_address=”替换即可)</span></span><br><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">bind-address=0.0.0.0</span><br><span class="line">user=mysql</span><br><span class="line"></span><br><span class="line">default_storage_engine=InnoDB</span><br><span class="line">innodb_autoinc_lock_mode=2</span><br><span class="line">innodb_flush_log_at_trx_commit=0</span><br><span class="line">innodb_buffer_pool_size=128M</span><br><span class="line"></span><br><span class="line">binlog_format=ROW</span><br><span class="line">log-error=/var/log/mysqld.log</span><br><span class="line"></span><br><span class="line">[galera]</span><br><span class="line">wsrep_on=ON</span><br><span class="line">wsrep_provider=/usr/lib64/galera-4/libgalera_smm.so</span><br><span class="line"></span><br><span class="line">wsrep_node_name=<span class="string">&#x27;galera1&#x27;</span></span><br><span class="line">wsrep_node_address=<span class="string">&quot;192.168.93.11&quot;</span></span><br><span class="line">wsrep_cluster_name=<span class="string">&#x27;galera-cluster&#x27;</span></span><br><span class="line">wsrep_cluster_address=<span class="string">&quot;gcomm://192.168.93.11,192.168.93.12,192.168.93.13&quot;</span></span><br><span class="line"></span><br><span class="line">wsrep_provider_options=<span class="string">&quot;gcache.size=300M; gcache.page_size=300M&quot;</span></span><br><span class="line">wsrep_slave_threads=4</span><br><span class="line">wsrep_sst_method=rsync</span><br><span class="line"></span><br><span class="line"> <span class="built_in">cd</span> tasks</span><br><span class="line"> <span class="comment">#编写yum.yml</span></span><br><span class="line"> vi yum.yml</span><br><span class="line">- name: <span class="built_in">mv</span> yum#若联网无需删除，但需修改repo添加repo</span><br><span class="line">  shell: <span class="string">&#x27;mv /etc/yum.repos.d/* /etc/yum&#x27;</span></span><br><span class="line">- name: copy mariadb-repo </span><br><span class="line">  copy: src=mariadb.repo dest=/etc/yum.repos.d/mariadb.repo</span><br><span class="line">- name: change repo</span><br><span class="line">   shell: sed -i <span class="string">&#x27;s#yum\.mariadb\.org#mirrors.ustc.edu.cn/mariadb/yum#&#x27;</span> /etc/yum.repos.d/mariadb.repo</span><br><span class="line">- name: install mariadb.galera.mysql-python</span><br><span class="line">  shell: <span class="string">&#x27;yum install -y MariaDB-server MariaDB-client rsync&#x27;</span></span><br><span class="line">   </span><br><span class="line">  <span class="comment">#编写service.yml</span></span><br><span class="line">- name: start node1 mariadb</span><br><span class="line">  service: name=mariadb state=started enabled=<span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">- name: <span class="built_in">set</span> node1 mysql_user</span><br><span class="line">  shell: mysqladmin -uroot password 123456</span><br><span class="line"></span><br><span class="line">- name: copy node1 config</span><br><span class="line">  copy: src=roles/mariadb-galera-cluster/files/server1.cnf dest=/etc/my.cnf.d/server.cnf</span><br><span class="line">  when: <span class="string">&quot;&#x27;node1&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: copy node2 config</span><br><span class="line">  copy: src=roles/mariadb-galera-cluster/files/server2.cnf dest=/etc/my.cnf.d/server.cnf</span><br><span class="line">  when: <span class="string">&quot;&#x27;node2&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: copy node3 config</span><br><span class="line">  copy: src=roles/mariadb-galera-cluster/files/server3.cnf dest=/etc/my.cnf.d/server.cnf</span><br><span class="line">  when: <span class="string">&quot;&#x27;node3&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: stop node1 mariadb</span><br><span class="line">  service: name=mariadb state=stopped</span><br><span class="line">  when: <span class="string">&quot;&#x27;node1&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: start node1 galera</span><br><span class="line">  shell: galera_new_cluster</span><br><span class="line">  when: <span class="string">&quot;&#x27;node1&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: restart node2 mariadb</span><br><span class="line">  service: name=mariadb state=restarted</span><br><span class="line">  when: <span class="string">&quot;&#x27;node2&#x27; in group_names&quot;</span></span><br><span class="line"></span><br><span class="line">- name: restart node3 mariadb</span><br><span class="line">  service: name=mariadb state=restarted</span><br><span class="line">  when: <span class="string">&quot;&#x27;node3&#x27; in group_names&quot;</span></span><br><span class="line">  <span class="comment">#########这里面有个mysql_user模块，通过“ansible-doc -s mysql_user”来查看这个模块的不详细信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#编写 main.yml</span></span><br><span class="line">vi main.yml</span><br><span class="line">- include: install.yml</span><br><span class="line">- include: service.yml</span><br><span class="line"></span><br><span class="line"><span class="comment">#编写入口文件</span></span><br><span class="line">vi cscc_install.yaml</span><br><span class="line">- hosts: all</span><br><span class="line">  remote_user: root</span><br><span class="line">  roles:</span><br><span class="line">  - mariadb-galera-cluster</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>#文件在文档test</p>
<h4 id="②手动部署"><a href="#②手动部署" class="headerlink" title="②手动部署"></a>②手动部署</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/networken/article/details/106297814#关闭防火墙</span><br><span class="line">systemctl <span class="built_in">disable</span> --now firewalld</span><br><span class="line">sed -i <span class="string">&#x27;s/^SELINUX=enforcing$/SELINUX=disabled/&#x27;</span> /etc/selinux/config &amp;&amp; setenforce 0</span><br><span class="line"><span class="comment">#修改主机名</span></span><br><span class="line">hostnamectl set-hostname xxx</span><br><span class="line"><span class="comment">#修改主机名解析</span></span><br><span class="line"><span class="built_in">cat</span> &gt;&gt; /etc/hosts &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">192.168.93.11 galera1</span></span><br><span class="line"><span class="string">192.168.93.12 galera2</span></span><br><span class="line"><span class="string">192.168.93.13 galera3</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">#配置yum源</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/yum.repos.d/mariadb.repo &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[mariadb]</span></span><br><span class="line"><span class="string">name = MariaDB</span></span><br><span class="line"><span class="string">baseurl = http://yum.mariadb.org/10.4/centos7-amd64</span></span><br><span class="line"><span class="string">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span></span><br><span class="line"><span class="string">gpgcheck=1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">#替换为中科大源</span></span><br><span class="line">sed -i <span class="string">&#x27;s#yum\.mariadb\.org#mirrors.ustc.edu.cn/mariadb/yum#&#x27;</span> /etc/yum.repos.d/mariadb.repo</span><br><span class="line"><span class="comment">#安装mariadb、galera和rsync,其中galera作为依赖自动安装</span></span><br><span class="line">yum install -y MariaDB-server MariaDB-client rsync</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置节点1</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/my.cnf.d/server.cnf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">datadir=/var/lib/mysql</span></span><br><span class="line"><span class="string">socket=/var/lib/mysql/mysql.sock</span></span><br><span class="line"><span class="string">bind-address=0.0.0.0</span></span><br><span class="line"><span class="string">user=mysql</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">default_storage_engine=InnoDB</span></span><br><span class="line"><span class="string">innodb_autoinc_lock_mode=2</span></span><br><span class="line"><span class="string">innodb_flush_log_at_trx_commit=0</span></span><br><span class="line"><span class="string">innodb_buffer_pool_size=128M</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">binlog_format=ROW</span></span><br><span class="line"><span class="string">log-error=/var/log/mysqld.log</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[galera]</span></span><br><span class="line"><span class="string">wsrep_on=ON</span></span><br><span class="line"><span class="string">wsrep_provider=/usr/lib64/galera-4/libgalera_smm.so</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_node_name=&#x27;galera1&#x27;</span></span><br><span class="line"><span class="string">wsrep_node_address=&quot;192.168.93.11&quot;</span></span><br><span class="line"><span class="string">wsrep_cluster_name=&#x27;galera-cluster&#x27;</span></span><br><span class="line"><span class="string">wsrep_cluster_address=&quot;gcomm://192.168.93.11,192.168.93.12,192.168.93.13&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_provider_options=&quot;gcache.size=300M; gcache.page_size=300M&quot;</span></span><br><span class="line"><span class="string">wsrep_slave_threads=4</span></span><br><span class="line"><span class="string">wsrep_sst_method=rsync</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置节点二</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/my.cnf.d/server.cnf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">datadir=/var/lib/mysql</span></span><br><span class="line"><span class="string">socket=/var/lib/mysql/mysql.sock</span></span><br><span class="line"><span class="string">bind-address=0.0.0.0</span></span><br><span class="line"><span class="string">user=mysql</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">default_storage_engine=InnoDB</span></span><br><span class="line"><span class="string">innodb_autoinc_lock_mode=2</span></span><br><span class="line"><span class="string">innodb_flush_log_at_trx_commit=0</span></span><br><span class="line"><span class="string">innodb_buffer_pool_size=128M</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">binlog_format=ROW</span></span><br><span class="line"><span class="string">log-error=/var/log/mysqld.log</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[galera]</span></span><br><span class="line"><span class="string">wsrep_on=ON</span></span><br><span class="line"><span class="string">wsrep_provider=/usr/lib64/galera-4/libgalera_smm.so</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_node_name=&#x27;galera2&#x27;</span></span><br><span class="line"><span class="string">wsrep_node_address=&quot;192.168.93.12&quot;</span></span><br><span class="line"><span class="string">wsrep_cluster_name=&#x27;galera-cluster&#x27;</span></span><br><span class="line"><span class="string">wsrep_cluster_address=&quot;gcomm://192.168.93.11,192.168.93.12,192.168.93.13&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_provider_options=&quot;gcache.size=300M; gcache.page_size=300M&quot;</span></span><br><span class="line"><span class="string">wsrep_slave_threads=4</span></span><br><span class="line"><span class="string">wsrep_sst_method=rsync</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="comment">#配置节点三：</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/my.cnf.d/server.cnf &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">datadir=/var/lib/mysql</span></span><br><span class="line"><span class="string">socket=/var/lib/mysql/mysql.sock</span></span><br><span class="line"><span class="string">bind-address=0.0.0.0</span></span><br><span class="line"><span class="string">user=mysql</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">default_storage_engine=InnoDB</span></span><br><span class="line"><span class="string">innodb_autoinc_lock_mode=2</span></span><br><span class="line"><span class="string">innodb_flush_log_at_trx_commit=0</span></span><br><span class="line"><span class="string">innodb_buffer_pool_size=128M</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">binlog_format=ROW</span></span><br><span class="line"><span class="string">log-error=/var/log/mysqld.log</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[galera]</span></span><br><span class="line"><span class="string">wsrep_on=ON</span></span><br><span class="line"><span class="string">wsrep_provider=/usr/lib64/galera-4/libgalera_smm.so</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_node_name=&#x27;galera3&#x27;</span></span><br><span class="line"><span class="string">wsrep_node_address=&quot;192.168.93.13&quot;</span></span><br><span class="line"><span class="string">wsrep_cluster_name=&#x27;galera-cluster&#x27;</span></span><br><span class="line"><span class="string">wsrep_cluster_address=&quot;gcomm://192.168.93.11,192.168.93.12,192.168.93.13&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wsrep_provider_options=&quot;gcache.size=300M; gcache.page_size=300M&quot;</span></span><br><span class="line"><span class="string">wsrep_slave_threads=4</span></span><br><span class="line"><span class="string">wsrep_sst_method=rsync</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#启动集群</span></span><br><span class="line">galera_new_cluster</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment">#另外两个</span></span><br><span class="line">systemctl <span class="built_in">enable</span> --now mariadb</span><br><span class="line">验证集群状态，默认未配置密码直接回车：</span><br><span class="line">[root@galera1 ~]# mysql -uroot -p -e <span class="string">&quot;SHOW STATUS LIKE &#x27;wsrep_cluster_size&#x27;&quot;</span></span><br><span class="line">Enter password: </span><br><span class="line">+--------------------+-------+</span><br><span class="line">| Variable_name      | Value |</span><br><span class="line">+--------------------+-------+</span><br><span class="line">| wsrep_cluster_size | 3     |</span><br><span class="line">+--------------------+-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.geekgold.xyz">GoldY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.geekgold.xyz/posts/6bf8b7d7.html">https://www.geekgold.xyz/posts/6bf8b7d7.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.geekgold.xyz" target="_blank">GoldY</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E8%81%8C%E4%B8%9A%E6%8A%80%E8%83%BD%E5%A4%A7%E8%B5%9B/">云计算职业技能大赛</a></div><div class="post-share"><div class="social-share" data-image="/img/cloud-com.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src="/img/zhifubao.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/aa9fe4ac.html" title="云计算方向-2022年云计算技能大赛-赛题私有云（部分）"><img class="cover" src="/img/cloud-com.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">云计算方向-2022年云计算技能大赛-赛题私有云（部分）</div></div><div class="info-2"><div class="info-item-1">第一套赛题   主机名 接口 ip地址    controller ens33 ens34 192.168.100.10  192.168.200.10   compute en33   ens34 192.168.100.20 192.168.200.20   任务1  基础运维任务（5分）1．根据表1中的IP地址规划，设置各服务器节点的IP地址，确保网络正常通信，设置云服务器1主机名为Controller，云服务器2主机名为Compute，并修改hosts文件将IP地址映射为主机名，关闭防火墙并设置为开机不启动，设置SELinux为Permissive 模式。 controller 1234567891011121314#更改主机名hostnamectl set-hostname controller#添加映射cat /etc/hosts127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4::1         localhost...</div></div></div></a><a class="pagination-related" href="/posts/9bf3df10.html" title="云计算方向-2022年全国职业院校技能大赛容器云"><img class="cover" src="/img/cloud-com.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">云计算方向-2022年全国职业院校技能大赛容器云</div></div><div class="info-2"><div class="info-item-1">【任务 1】容器云平台搭建[5 分] 【题目 1】平台部署–部署容器云平台[1.5 分]登录OpenStack 私有云平台，使用 CentOS7.9 镜像创建两台云主机，使用 kubeeasy 工具完成Kubernetes 1.22.1 集群的搭建。然后使用 nginx 镜像在 default 命名空间下创建一个名为exam 的Pod，并为该 Pod 设置环境变量 exam，其值为 2022。完成后提交 master 节点的用户名、密码和 IP 到答题框。 123456789101112131415161718192021222324252627282930313233#两台节点，将提供的安装包 chinaskills_cloud_paas_v2.0.2.iso 上传至 master 节点/root 目录，并解压 到/opt 目录[root@localhost ~]# mount -o loop chinaskills_cloud_paas_v2.0.2.iso /mnt/ [root@localhost ~]# cp -rfv /mnt/* /opt/...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年金砖一带一路职业技能大赛云计算赛题</div></div><div class="info-2"><div class="info-item-1">A场次题目：Openstack 平台部署与运维任务1 私有云平台环境初始化1.初始化操作系统 使用提供的用户名密码，登录竞赛云平台。根据表 1 中的 IP 地址规划，设置各服务器节点的 IP 地址，确保网络正常通信，设置控制节点主机名为 Contro ller，计算节点主机名为 Compute，并修改 hosts 文件将 IP 地址映射为主机名， 关闭防火墙并设置为开机不启动，设置 SELinux 为 Permissive 模式并设置永久 关闭。请查看控制节点和计算节点主机名，使用命令查看 SELinux 状态，使用 head 命令、tail 命令和 cut 命令提取出永久关闭 SELinux 的关键信息。 将以上命令及返回结果提交到答题框  配置host 123456vi /etc/hosts127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4::1         localhost localhost.localdomain localhost6...</div></div></div></a><a class="pagination-related" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-Ansible搭建wordpress</div></div><div class="info-2"><div class="info-item-1">一.ansible搭建wordpress基于lamp构建wordpress    master 192.168.200.100 控制节点    node1 192.168.200.101 web服务器   node2 192.168.200.102 mysql服务器   vi &#x2F;etc&#x2F;ansible&#x2F;host 12345678[master]master[web]192.168.200.101node1[database]192.168.200.102node2  vi wordpress.yaml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354---# hosts: 后面可写主机组名或主机名- hosts: all  remote_user: root  # 定义变量  vars:    db_pkgs:      # 以下的-为变量“值”，也就是在引用db_pkgs变量时，可取变量中的值   ...</div></div></div></a><a class="pagination-related" href="/posts/840d388d.html" title="云计算方向-2023年金砖大赛山东选拔题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年金砖大赛山东选拔题</div></div><div class="info-2"><div class="info-item-1">A场次题目：OpenStack平台部署与运维业务场景： 某企业拟使用OpenStack搭建一个企业云平台，用于部署各类企业应用对外对内服务。云平台可实现IT资源池化，弹性分配，集中管理，性能优化以及统一安全认证等。系统结构如下图： 企业云平台的搭建使用竞赛平台提供的两台云服务器，配置如下表：    设备名称 主机名 接口 ip地址    云服务器1 controller eth0，eth1 私网：192.168.100.10&#x2F;24           私网：192.168.200.10&#x2F;24   云服务器2 compute eth0，eth1 私网：192.168.100.20&#x2F;24        ...</div></div></div></a><a class="pagination-related" href="/posts/c134dd26.html" title="云计算方向-2022年云计算技能大赛样题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2022年云计算技能大赛样题</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年GZ075 云计算应用赛项赛题</div></div><div class="info-2"><div class="info-item-1">模块一 私有云（30分）企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。 任务1 私有云服务搭建（5分）1.1.1 基础环境配置1.控制节点主机名为controller，设置计算节点主机名为compute； 12345678910#控制节点[root@localhost ~]# hostnamectl set-hostname controller[root@localhost ~]# bash[root@controller ~]##计算节点[root@localhost ~]# hostnamectl set-hostname compute[root@localhost ~]# bash[root@compute ~]#    2.hosts文件将IP地址映射为主机名。 123456#全部节点[root@controller ~]# cat /etc/hosts127.0.0.1   localhost localhost.localdomain localhost4...</div></div></div></a><a class="pagination-related" href="/posts/2c8237f4.html" title="云计算方向-2022年云计算技能国赛私有云套题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2022年云计算技能国赛私有云套题</div></div><div class="info-2"><div class="info-item-1">第一套私有云运维任务：题目3. OpenStack云平台运维（10分）1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。可能会遇到 mod_ssl 安装不成功的问题，原因是mod_ssl版本不匹配，上传mod_ssl-2.4.6-97.el7.centos.x86_64.rpm ①安装工具包 1yum install -y mod_wsgi httpd mod_ssl  ②修改&#x2F;etc&#x2F;openstack-dashboard&#x2F;local_settings文件 123456vi /etc/openstack-dashboard/local_settings##在DEBUG = False下增加4行USE_SSL = TrueCSRF_COOKIE_SECURE = True		##原文中有，去掉注释即可SESSION_COOKIE_SECURE = True		##原文中有，去掉注释即可SESSION_COOKIE_HTTPONLY =...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">GoldY</div><div class="author-info-description">不经一番寒彻骨，怎得梅花扑鼻香。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuwenjin666"><i class="fab fa-github"></i><span>Github主页</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">联系我V：GoldY_66</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A5%97"><span class="toc-number">1.</span> <span class="toc-text">第一套</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E4%BB%BB%E5%8A%A1-1%E3%80%91%E7%A7%81%E6%9C%89%E4%BA%91%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA-10%E5%88%86"><span class="toc-number">1.1.</span> <span class="toc-text">【任务 1】私有云服务搭建[10分]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-1%E3%80%91%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-0-5-%E5%88%86"><span class="toc-number">1.1.1.</span> <span class="toc-text">【题目 1】基础环境配置[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-2%E3%80%91Yum-%E6%BA%90%E9%85%8D%E7%BD%AE-0-5-%E5%88%86"><span class="toc-number">1.1.2.</span> <span class="toc-text">【题目 2】Yum 源配置[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-3%E3%80%91%E9%85%8D%E7%BD%AE%E6%97%A0%E7%A7%98%E9%92%A5-ssh-0-5-%E5%88%86"><span class="toc-number">1.1.3.</span> <span class="toc-text">【题目 3】配置无秘钥 ssh[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-4%E3%80%91%E5%9F%BA%E7%A1%80%E5%AE%89%E8%A3%85-0-5-%E5%88%86"><span class="toc-number">1.1.4.</span> <span class="toc-text">【题目 4】基础安装[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-5%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85%E4%B8%8E%E8%B0%83%E4%BC%98-0-5-%E5%88%86"><span class="toc-number">1.1.5.</span> <span class="toc-text">【题目 5】数据库安装与调优[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-6%E3%80%91Keystone-%E6%9C%8D%E5%8A%A1%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8-0-5-%E5%88%86"><span class="toc-number">1.1.6.</span> <span class="toc-text">【题目 6】Keystone 服务安装与使用[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-7%E3%80%91Glance-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8-0-5-%E5%88%86"><span class="toc-number">1.1.7.</span> <span class="toc-text">【题目 7】Glance 安装与使用[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-8%E3%80%91Nova-%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BC%98%E5%8C%96-0-5-%E5%88%86"><span class="toc-number">1.1.8.</span> <span class="toc-text">【题目 8】Nova 安装与优化[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-9%E3%80%91Neutron-%E5%AE%89%E8%A3%85-0-5-%E5%88%86"><span class="toc-number">1.1.9.</span> <span class="toc-text">【题目 9】Neutron 安装[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-10%E3%80%91Doshboard-%E5%AE%89%E8%A3%85-0-5-%E5%88%86"><span class="toc-number">1.1.10.</span> <span class="toc-text">【题目 10】Doshboard 安装[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-11%E3%80%91Swift-%E5%AE%89%E8%A3%85-0-5-%E5%88%86"><span class="toc-number">1.1.11.</span> <span class="toc-text">【题目 11】Swift 安装[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-12%E3%80%91Cinder-%E5%88%9B%E5%BB%BA%E7%A1%AC%E7%9B%98-0-5-%E5%88%86"><span class="toc-number">1.1.12.</span> <span class="toc-text">【题目 12】Cinder 创建硬盘[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-13%E3%80%91Manila-%E6%9C%8D%E5%8A%A1%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8-0-5-%E5%88%86"><span class="toc-number">1.1.13.</span> <span class="toc-text">【题目 13】Manila 服务安装与使用[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-14%E3%80%91Barbican-%E6%9C%8D%E5%8A%A1%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8-0-5-%E5%88%86"><span class="toc-number">1.1.14.</span> <span class="toc-text">【题目 14】Barbican 服务安装与使用[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-15%E3%80%91Cloudkitty-%E6%9C%8D%E5%8A%A1%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8-1-%E5%88%86"><span class="toc-number">1.1.15.</span> <span class="toc-text">【题目 15】Cloudkitty 服务安装与使用[1 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-16%E3%80%91OpenStack-%E5%B9%B3%E5%8F%B0%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96-0-5-%E5%88%86"><span class="toc-number">1.1.16.</span> <span class="toc-text">【题目 16】OpenStack 平台内存优化[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-17%E3%80%91%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%E6%95%B0-0-5-%E5%88%86"><span class="toc-number">1.1.17.</span> <span class="toc-text">【题目 17】修改文件句柄数[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-18%E3%80%91Linux-%E7%B3%BB%E7%BB%9F%E8%B0%83%E4%BC%98-%E9%98%B2%E6%AD%A2-SYN-%E6%94%BB%E5%87%BB-1-%E5%88%86"><span class="toc-number">1.1.18.</span> <span class="toc-text">【题目 18】Linux 系统调优-防止 SYN 攻击[1 分]</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E4%BB%BB%E5%8A%A1-2%E3%80%91%E7%A7%81%E6%9C%89%E4%BA%91%E6%9C%8D%E5%8A%A1%E8%BF%90%E7%BB%B4-10%E5%88%86"><span class="toc-number">1.2.</span> <span class="toc-text">**【任务 **2】私有云服务运维[10分]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-1%E3%80%91OpenStack-%E5%BC%80%E6%94%BE%E9%95%9C%E5%83%8F%E6%9D%83%E9%99%90-0-5-%E5%88%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">【题目 1】OpenStack 开放镜像权限[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-2%E3%80%91OpenStack-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E8%B0%83%E4%BC%98-0-5-%E5%88%86"><span class="toc-number">1.2.2.</span> <span class="toc-text">【题目 2】OpenStack 消息队列调优[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-3%E3%80%91OpenStack-Glance-%E9%95%9C%E5%83%8F%E5%8E%8B%E7%BC%A9-0-5-%E5%88%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">【题目 3】OpenStack Glance 镜像压缩[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-4%E3%80%91glance-%E5%AF%B9%E6%8E%A5-cinder-%E5%90%8E%E7%AB%AF%E5%AD%98%E5%82%A8-0-5-%E5%88%86"><span class="toc-number">1.2.4.</span> <span class="toc-text">【题目 4】glance 对接 cinder 后端存储[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-5%E3%80%91OpenStack-Heat-%E8%BF%90%E7%BB%B4%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8-0-5-%E5%88%86"><span class="toc-number">1.2.5.</span> <span class="toc-text">【题目 5】OpenStack Heat 运维：创建容器[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-6%E3%80%91OpenStack-Nova-%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98-0-5-%E5%88%86"><span class="toc-number">1.2.6.</span> <span class="toc-text">【题目 6】OpenStack Nova 清除缓存[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-7%E3%80%91Redis-%E4%B8%80%E4%B8%BB%E4%BA%8C%E4%BB%8E%E4%B8%89%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F-1-%E5%88%86"><span class="toc-number">1.2.7.</span> <span class="toc-text">【题目 7】Redis 一主二从三哨兵模式[1 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-8%E3%80%91Redis-%E6%9C%8D%E5%8A%A1%E8%B0%83%E4%BC%98-AOF-1-%E5%88%86"><span class="toc-number">1.2.8.</span> <span class="toc-text">【题目 8】Redis 服务调优-AOF[1 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-9%E3%80%91%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%EF%BC%9A%E5%A0%A1%E5%9E%92%E6%9C%BA%E9%83%A8%E7%BD%B2-0-5-%E5%88%86"><span class="toc-number">1.2.9.</span> <span class="toc-text">【题目 9】应用部署：堡垒机部署[0.5 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-10%E3%80%91skywalking-%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%BA%94%E7%94%A8-1-%E5%88%86"><span class="toc-number">1.2.10.</span> <span class="toc-text">【题目 10】skywalking 服务部署与应用[1 分]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-11%E3%80%91Linux-%E5%86%85%E6%A0%B8%E4%BC%98%E5%8C%96-1-%E5%88%86"><span class="toc-number">1.2.11.</span> <span class="toc-text">【题目 11】Linux 内核优化[1 分]</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E4%BB%BB%E5%8A%A1-3%E3%80%91%E7%A7%81%E6%9C%89%E4%BA%91%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91-10-%E5%88%86"><span class="toc-number">1.3.</span> <span class="toc-text">【任务 3】私有云运维开发[10 分]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%A2%98%E7%9B%AE-1%E3%80%91Ansible-%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%EF%BC%9A%E9%83%A8%E7%BD%B2-MariaDB-%E9%9B%86%E7%BE%A4-2-%E5%88%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">【题目 1】Ansible 服务部署：部署 MariaDB 集群[2 分]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0ansible%E9%83%A8%E7%BD%B2"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">①ansible部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">②手动部署</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-Ansible搭建wordpress"/></a><div class="content"><a class="title" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress">云计算方向-Ansible搭建wordpress</a><time datetime="2025-05-14T02:48:38.000Z" title="发表于 2025-05-14 10:48:38">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"/></a><div class="content"><a class="title" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题">云计算方向-2023年金砖一带一路职业技能大赛云计算赛题</a><time datetime="2025-05-14T02:48:37.000Z" title="发表于 2025-05-14 10:48:37">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d5ee981d.html" title="云计算方向-2023年一带一路职业技能大赛云计算(样题)"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年一带一路职业技能大赛云计算(样题)"/></a><div class="content"><a class="title" href="/posts/d5ee981d.html" title="云计算方向-2023年一带一路职业技能大赛云计算(样题)">云计算方向-2023年一带一路职业技能大赛云计算(样题)</a><time datetime="2025-05-14T02:48:35.000Z" title="发表于 2025-05-14 10:48:35">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a8884406.html" title="云计算方向-2023年金砖大赛"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年金砖大赛"/></a><div class="content"><a class="title" href="/posts/a8884406.html" title="云计算方向-2023年金砖大赛">云计算方向-2023年金砖大赛</a><time datetime="2025-05-14T02:48:32.000Z" title="发表于 2025-05-14 10:48:32">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年GZ075 云计算应用赛项赛题"/></a><div class="content"><a class="title" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题">云计算方向-2023年GZ075 云计算应用赛项赛题</a><time datetime="2025-05-14T02:47:38.000Z" title="发表于 2025-05-14 10:47:38">2025-05-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/bottom-bg.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2025 By GoldY</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-ashen-rho.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo-ashen-rho.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start -->
  <script data-pjax src="/js/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://githubcalendarapi.shiguang666.eu.org/api?user=yuwenjin666";
            var git_color =['#ebedf0', '#a2f7af', '#6ce480', '#54ad63', '#469252', '#31753c', '#1f5f2a', '#13531f', '#084111', '#032b09', '#000000'];
            var git_user ="yuwenjin666";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>