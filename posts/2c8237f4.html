<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>云计算方向-2022年云计算技能国赛私有云套题 | GoldY</title><meta name="author" content="GoldY"><meta name="copyright" content="GoldY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="2022年云计算技能国赛私有云套题">
<meta property="og:type" content="article">
<meta property="og:title" content="云计算方向-2022年云计算技能国赛私有云套题">
<meta property="og:url" content="https://www.geekgold.xyz/posts/2c8237f4.html">
<meta property="og:site_name" content="GoldY">
<meta property="og:description" content="2022年云计算技能国赛私有云套题">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.geekgold.xyz/img/cloud-com.jpg">
<meta property="article:published_time" content="2025-05-14T02:47:33.000Z">
<meta property="article:modified_time" content="2025-05-14T03:16:03.865Z">
<meta property="article:author" content="GoldY">
<meta property="article:tag" content="云计算">
<meta property="article:tag" content="云计算职业技能大赛">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.geekgold.xyz/img/cloud-com.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "云计算方向-2022年云计算技能国赛私有云套题",
  "url": "https://www.geekgold.xyz/posts/2c8237f4.html",
  "image": "https://www.geekgold.xyz/img/cloud-com.jpg",
  "datePublished": "2025-05-14T02:47:33.000Z",
  "dateModified": "2025-05-14T03:16:03.865Z",
  "author": [
    {
      "@type": "Person",
      "name": "GoldY",
      "url": "https://www.geekgold.xyz/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.geekgold.xyz/posts/2c8237f4.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="bing-site-verification" content="E05CD8D6921B8F2AA32324DF2B267557"/><meta name="baidu-site-verification" content="codeva-tCktTl1n17"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '云计算方向-2022年云计算技能国赛私有云套题',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/bg2.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-link"></i><span> 工具链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-cog"></i><span> 渗透工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cloud-com.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/logo.png" alt="Logo"><span class="site-name">GoldY</span></a><a class="nav-page-title" href="/"><span class="site-name">云计算方向-2022年云计算技能国赛私有云套题</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-link"></i><span> 工具链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fa fa-cog"></i><span> 渗透工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">云计算方向-2022年云计算技能国赛私有云套题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-14T02:47:33.000Z" title="发表于 2025-05-14 10:47:33">2025-05-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-14T03:16:03.865Z" title="更新于 2025-05-14 11:16:03">2025-05-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E8%AE%A1%E7%AE%97/%E6%8A%80%E8%83%BD%E5%A4%A7%E8%B5%9B%E6%B1%87%E6%80%BB/">技能大赛汇总</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="第一套"><a href="#第一套" class="headerlink" title="第一套"></a>第一套</h1><h2 id="私有云运维任务："><a href="#私有云运维任务：" class="headerlink" title="私有云运维任务："></a>私有云运维任务：</h2><h3 id="题目3-OpenStack云平台运维（10分）"><a href="#题目3-OpenStack云平台运维（10分）" class="headerlink" title="题目3. OpenStack云平台运维（10分）"></a>题目3. OpenStack云平台运维（10分）</h3><h4 id="1-使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。"><a href="#1-使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。" class="headerlink" title="1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。"></a>1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。</h4><p><strong>可能会遇到 mod_ssl 安装不成功的问题，原因是mod_ssl版本不匹配，上传mod_ssl-2.4.6-97.el7.centos.x86_64.rpm</strong></p>
<p>①安装工具包</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install <span class="literal">-y</span> mod_wsgi httpd mod_ssl</span><br></pre></td></tr></table></figure>

<p>②修改&#x2F;etc&#x2F;openstack-dashboard&#x2F;local_settings文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/openstack-dashboard/local_settings</span><br><span class="line"><span class="comment">##在DEBUG = False下增加4行</span></span><br><span class="line">USE_SSL = True</span><br><span class="line">CSRF_COOKIE_SECURE = True		<span class="comment">##原文中有，去掉注释即可</span></span><br><span class="line">SESSION_COOKIE_SECURE = True		<span class="comment">##原文中有，去掉注释即可</span></span><br><span class="line">SESSION_COOKIE_HTTPONLY = True</span><br></pre></td></tr></table></figure>

<p>③修改&#x2F;etc&#x2F;httpd&#x2F;conf.d&#x2F;ssl.conf配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/httpd/conf.d/ssl.conf</span><br><span class="line">##将SSLProtocol all -SSLv2 -SSLv3改成：</span><br><span class="line">SSLProtocol all -SSLv2</span><br></pre></td></tr></table></figure>

<p>④重启服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd</span><br><span class="line">systemctl restart memcached</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>访问Web</li>
</ol>
<h4 id="2-在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有："><a href="#2-在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：" class="headerlink" title="2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有："></a>2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：</h4><p>（1）设置内存超售比例为1.5倍；</p>
<p>（2）设置nova服务心跳检查时间为120秒。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line">ram_allocation_ratio = 1.5</span><br><span class="line">service_down_time = 120</span><br></pre></td></tr></table></figure>

<h4 id="3-在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。"><a href="#3-在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。" class="headerlink" title="3.在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。"></a>3.在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。</h4><p>①修改配置文件</p>
<p>vi &#x2F;etc&#x2F;glance&#x2F;glance-api.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[glance_store]</span><br><span class="line">stores=glance.store.filesystem.Store,glance.store.swift.Store,glance.store.http.Store</span><br><span class="line">default_store=swift</span><br><span class="line">swift_store_region=RegionOne</span><br><span class="line">swift_store_endpoint_type=internalURL</span><br><span class="line">swift_store_container=glance</span><br><span class="line">swift_store_large_object_size=5120</span><br><span class="line">swift_store_large_object_chunk_size=200</span><br><span class="line">swift_store_create_container_on_put=True</span><br><span class="line">swift_store_multi_tenant=True</span><br><span class="line">swift_store_admin_tenants=service</span><br><span class="line">swift_store_auth_address=http://controller:5000/v3</span><br><span class="line">swift_store_user=glance</span><br><span class="line">swift_store_key=000000</span><br></pre></td></tr></table></figure>

<p>重启 <strong>glance</strong> 所有组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart openstack-glance-*</span><br></pre></td></tr></table></figure>

<h4 id="4-在提供的OpenStack平台上，编写heat模板createvm-yml文件，模板作用为按照要求创建一个云主机。"><a href="#4-在提供的OpenStack平台上，编写heat模板createvm-yml文件，模板作用为按照要求创建一个云主机。" class="headerlink" title="4.在提供的OpenStack平台上，编写heat模板createvm.yml文件，模板作用为按照要求创建一个云主机。"></a>4.在提供的OpenStack平台上，编写heat模板createvm.yml文件，模板作用为按照要求创建一个云主机。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> cat createvm.yml</span><br><span class="line">heat_template_version: 2018-08-31</span><br><span class="line">resources:</span><br><span class="line">  server1:</span><br><span class="line">    type: OS::Nova::Server</span><br><span class="line">    properties:</span><br><span class="line">      name: mytest1</span><br><span class="line">      image: &quot;centos7.5&quot;</span><br><span class="line">      flavor: &quot;small&quot;</span><br><span class="line">      networks:</span><br><span class="line">        - network: &quot;intnet&quot;</span><br><span class="line"></span><br><span class="line">outputs:</span><br><span class="line">  server_names:</span><br><span class="line">    value: &#123; get_attr: [ server1 , name ] &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">openstack stack create -t createvm.yml vm</span><br></pre></td></tr></table></figure>

<h4 id="5-在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。"><a href="#5-在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。" class="headerlink" title="5.在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。"></a>5.在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# lsblk</span><br><span class="line">NAME                                            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda                                               8:0    0  200G  0 disk</span><br><span class="line">├─sda1                                            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2                                            8:2    0   19G  0 part</span><br><span class="line">  ├─centos-root                                 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─centos-swap                                 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb                                               8:16   0   50G  0 disk</span><br><span class="line">├─sdb1                                            8:17   0   10G  0 part</span><br><span class="line">│ ├─cinder--volumes-cinder--volumes--pool_tmeta 253:2    0   12M  0 lvm</span><br><span class="line">│ │ └─cinder--volumes-cinder--volumes--pool     253:4    0  9.5G  0 lvm</span><br><span class="line">│ └─cinder--volumes-cinder--volumes--pool_tdata 253:3    0  9.5G  0 lvm</span><br><span class="line">│   └─cinder--volumes-cinder--volumes--pool     253:4    0  9.5G  0 lvm</span><br><span class="line">├─sdb2                                            8:18   0   10G  0 part /swift/node/sdb2</span><br><span class="line">├─sdb3                                            8:19   0   10G  0 part</span><br><span class="line">└─sdb4                                            8:20   0    5G  0 part</span><br><span class="line">sr0                                              11:0    1  4.4G  0 rom</span><br><span class="line">[root@compute ~]#</span><br><span class="line">[root@compute ~]# vgdisplay</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  4</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;10.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              2559</span><br><span class="line">  Alloc PE / Size       2438 / 9.52 GiB</span><br><span class="line">  Free  PE / Size       121 / 484.00 MiB</span><br><span class="line">  VG UUID               3k0yKg-iQB2-b2CM-a0z2-2ddJ-cdG3-8WpyrG</span><br><span class="line"></span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  3</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;19.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              4863</span><br><span class="line">  Alloc PE / Size       4863 / &lt;19.00 GiB</span><br><span class="line">  Free  PE / Size       0 / 0</span><br><span class="line">  VG UUID               acAXNK-eqKm-qs9b-ly3T-R3Sh-8qyv-nELNWv</span><br><span class="line">  [root@compute ~]# vgextend cinder-volumes /dev/sdb4</span><br><span class="line">  Volume group &quot;cinder-volumes&quot; successfully extended</span><br><span class="line">[root@compute ~]# vgdisplay</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  5</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               14.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              3838</span><br><span class="line">  Alloc PE / Size       2438 / 9.52 GiB</span><br><span class="line">  Free  PE / Size       1400 / &lt;5.47 GiB</span><br><span class="line">  VG UUID               3k0yKg-iQB2-b2CM-a0z2-2ddJ-cdG3-8WpyrG</span><br><span class="line"></span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  3</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;19.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              4863</span><br><span class="line">  Alloc PE / Size       4863 / &lt;19.00 GiB</span><br><span class="line">  Free  PE / Size       0 / 0</span><br><span class="line">  VG UUID               acAXNK-eqKm-qs9b-ly3T-R3Sh-8qyv-nELNWv</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。"><a href="#6-在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。" class="headerlink" title="6.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。"></a>6.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。</h4><h5 id="手动部署"><a href="#手动部署" class="headerlink" title="手动部署"></a>手动部署</h5><p>Ⅰ.环境配置</p>
<p>①<strong>修改主机名</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname mall</span><br></pre></td></tr></table></figure>

<p><strong>②配置&#x2F;etc&#x2F;hosts主机映射</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">192.168.200.103 mall</span><br></pre></td></tr></table></figure>

<p><strong>③关闭防火墙和selinux</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭防火墙</span></span><br><span class="line">systemctl stop firewalld &amp;&amp; systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#关闭安全策略</span></span><br><span class="line">setenforce 0 </span><br><span class="line">sed -i <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br></pre></td></tr></table></figure>

<p><strong>④配置本地仓库</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上传相对应的镜像和gpmall-repo</span></span><br><span class="line"><span class="built_in">mkdir</span> /opt/centos</span><br><span class="line">mount CentOS-7-x86_64-DVD-1804.iso  /opt/centos/</span><br><span class="line"></span><br><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d/* /etc/yum</span><br><span class="line">vi /etc/yum.repos.d/local.repo</span><br><span class="line"></span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=file:///opt/centos</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">[gpmall-mall]</span><br><span class="line">name=gpmall-mall</span><br><span class="line">baseurl=file:///root/gpmall-repo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>

<p>Ⅱ.应用系统的基础服务安装</p>
<p>①安装java<strong>环境</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel</span><br><span class="line">[root@mall ~]# java -version</span><br><span class="line">openjdk version <span class="string">&quot;1.8.0_222&quot;</span></span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_222-b10)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.222-b10, mixed mode)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>②安装redis,nginx,mariadb</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install redis nginx mariadb mariadb-server -y</span><br></pre></td></tr></table></figure>

<p>③安装zookeeper</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">上传安装包</span></span><br><span class="line">tar -zxvf zookeeper-3.4.14.tar.gz -C /opt/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入到zookeeper-3.4.14/bin目录下，并启动ZooKeeper服务</span></span><br><span class="line">cd /opt/zookeeper-3.4.14/conf</span><br><span class="line">mv zoo_sample.cfg zoo.cfg</span><br><span class="line">cd ../bin</span><br><span class="line">./zkServer.sh start</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看状态</span></span><br><span class="line">./zkServer.sh status</span><br></pre></td></tr></table></figure>

<p><strong>④安装kafka</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将提供的kafka_2.11-1.1.1.tgz包上传到服务器的/opt目录下，并解压该压缩包</span></span><br><span class="line">tar -zxvf kafka_2.11-1.1.1.tgz -C /opt/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入到kafka_2.11-1.1.1/bin目录下，启动Kafka服务</span></span><br><span class="line">cd kafka_2.11-1.1.1/bin/</span><br><span class="line"> ./kafka-server-start.sh -daemon ../config/server.properties</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看是否成功启动</span></span><br><span class="line">[root@mall ~]# jps</span><br><span class="line">11371 QuorumPeerMain</span><br><span class="line">11692 Kafka</span><br><span class="line">13183 Jps</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Ⅲ修改服务配置</p>
<p>①配置mariadb服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改/etc/my.cnf配置文件</span></span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">port=8066 <span class="comment">#若使用的是项目四软件包</span></span><br><span class="line">init_connect=<span class="string">&#x27;SET collation_connection = utf8_unicode_ci&#x27;</span></span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br><span class="line"><span class="comment">#启动数据库服务</span></span><br><span class="line">systemctl start mariadb</span><br><span class="line"><span class="comment">#设置密码</span></span><br><span class="line">mysqladmin -uroot password 123456</span><br><span class="line"><span class="comment">#配置授权</span></span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">-&gt; grant all privileges on *.* to root@localhost identified by <span class="string">&#x27;123456&#x27;</span> with grant option;</span><br><span class="line">-&gt; grant all privileges on *.* to root@<span class="string">&quot;%&quot;</span> identified by <span class="string">&#x27;123456&#x27;</span> with grant option;</span><br><span class="line"><span class="comment">#将gpmall.sql上传到root</span></span><br><span class="line"><span class="comment">#创建数据库gpmall并导入gpmall.sql文件</span></span><br><span class="line">-&gt; create database gpmall;</span><br><span class="line">-&gt; <span class="built_in">source</span> /root/gpmall.sql</span><br><span class="line">-&gt; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>②配置reids服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改Redis配置文件，编辑/etc/redis.conf文件</span></span><br><span class="line">vi /etc/redis.conf</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">将61行的<span class="built_in">bind</span> 127.0.0.1这一行注释掉（在前面加个#号注释）</span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">将80行的protected-mode <span class="built_in">yes</span> 改为 protected-mode no</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动服务</span></span><br><span class="line">systemctl start redis</span><br><span class="line">systemctl enable redis</span><br></pre></td></tr></table></figure>

<p>③配置nginx</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动服务</span></span><br><span class="line">systemctl start nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure>

<p>Ⅳ修改全局变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据jar报的错误修改hosts</span></span><br><span class="line">vi /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.200.103 mall</span><br><span class="line">192.168.200.103 kafka1.mall</span><br><span class="line">127.0.0.1 mysql.mall</span><br><span class="line">192.168.200.103 redis.mall</span><br><span class="line">192.168.200.103 zk1.mall</span><br><span class="line"><span class="comment">#部署前端</span></span><br><span class="line"><span class="built_in">rm</span> -rf /usr/share/nginx/html/*</span><br><span class="line"><span class="built_in">cp</span> -rvf /root/dist/* /usr/share/nginx/html/</span><br><span class="line">vi /etc/nginx/conf.d/default.conf</span><br><span class="line"> <span class="comment">#注意对齐</span></span><br><span class="line"> location /user &#123;</span><br><span class="line">     proxy_pass http://127.0.0.1:8082;</span><br><span class="line"> &#125;</span><br><span class="line"> location /shopping &#123;</span><br><span class="line">     proxy_pass http://127.0.0.1:8081;</span><br><span class="line"> &#125;</span><br><span class="line"> location /cashier &#123;</span><br><span class="line">     proxy_pass http://127.0.0.1:8083;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">#重启Nginx服务</span></span><br><span class="line"> systemctl restart nginx</span><br><span class="line"><span class="comment">#部署后端</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar shopping-provider-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line"><span class="built_in">nohup</span> java -jar user-provider-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line"><span class="built_in">nohup</span> java -jar gpmall-shopping-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line"><span class="built_in">nohup</span> java -jar gpmall-user-0.0.1-SNAPSHOT.jar &amp;</span><br><span class="line"> <span class="comment">#验证状态</span></span><br><span class="line"> <span class="built_in">jobs</span></span><br></pre></td></tr></table></figure>



<h4 id="7-使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。"><a href="#7-使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。" class="headerlink" title="7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。"></a>7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</h4><p>使用Manila命令创建default_type_share共享类型</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# <span class="built_in">source</span> /etc/keystone/admin-openrc.sh </span><br><span class="line">[root@controller ~]# manila type-create default_share_type False</span><br><span class="line">+----------------------+--------------------------------------+</span><br><span class="line">| Property             | Value                                |</span><br><span class="line">+----------------------+--------------------------------------+</span><br><span class="line">| required_extra_specs | driver_handles_share_servers : False |</span><br><span class="line">| Name                 | default_share_type                   |</span><br><span class="line">| Visibility           | public                               |</span><br><span class="line">| is_default           | YES                                  |</span><br><span class="line">| ID                   | 0fec7bca-f1a1-4e92-8d4b-aaf02147571a |</span><br><span class="line">| optional_extra_specs |                                      |</span><br><span class="line">| Description          | None                                 |</span><br><span class="line">+----------------------+--------------------------------------+‘</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看类型列表信息</span></span><br><span class="line">[root@controller ~]# manila type-list</span><br><span class="line">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span><br><span class="line">| ID                                   | Name               | visibility | is_default | required_extra_specs                 | optional_extra_specs | Description |</span><br><span class="line">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span><br><span class="line">| 0fec7bca-f1a1-4e92-8d4b-aaf02147571a | default_share_type | public     | YES        | driver_handles_share_servers : False |                      | None        |</span><br><span class="line">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span><br></pre></td></tr></table></figure>

<p><strong>创建共享文件目录</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建目录大小为2g的共享目录shre-test</span></span><br><span class="line">[root@controller ~]# manila create NFS 2 --name share-test</span><br><span class="line">+---------------------------------------+--------------------------------------+</span><br><span class="line">| Property                              | Value                                |</span><br><span class="line">+---------------------------------------+--------------------------------------+</span><br><span class="line">| status                                | creating                             |</span><br><span class="line">| share_type_name                       | default_share_type                   |</span><br><span class="line">| description                           | None                                 |</span><br><span class="line">| availability_zone                     | None                                 |</span><br><span class="line">| share_network_id                      | None                                 |</span><br><span class="line">| share_server_id                       | None                                 |</span><br><span class="line">| share_group_id                        | None                                 |</span><br><span class="line">| host                                  |                                      |</span><br><span class="line">| revert_to_snapshot_support            | False                                |</span><br><span class="line">| access_rules_status                   | active                               |</span><br><span class="line">| snapshot_id                           | None                                 |</span><br><span class="line">| create_share_from_snapshot_support    | False                                |</span><br><span class="line">| is_public                             | False                                |</span><br><span class="line">| task_state                            | None                                 |</span><br><span class="line">| snapshot_support                      | False                                |</span><br><span class="line">| <span class="built_in">id</span>                                    | a4b2a4f1-421f-4de3-8fca-d2ee8a5f4bb9 |</span><br><span class="line">| size                                  | 2                                    |</span><br><span class="line">| source_share_group_snapshot_member_id | None                                 |</span><br><span class="line">| user_id                               | 89f8027475294689ae6c0183fa35bf5a     |</span><br><span class="line">| name                                  | share-test                           |</span><br><span class="line">| share_type                            | 0fec7bca-f1a1-4e92-8d4b-aaf02147571a |</span><br><span class="line">| has_replicas                          | False                                |</span><br><span class="line">| replication_type                      | None                                 |</span><br><span class="line">| created_at                            | 2022-05-06T11:24:02.000000           |</span><br><span class="line">| share_proto                           | NFS                                  |</span><br><span class="line">| mount_snapshot_support                | False                                |</span><br><span class="line">| project_id                            | 0b6f2d0be1d342e09edc31dc841db7a5     |</span><br><span class="line">| metadata                              | &#123;&#125;                                   |</span><br><span class="line">+---------------------------------------+--------------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询所创建的共享目录列表信息</span></span><br><span class="line">[root@controller ~]# manila list</span><br><span class="line">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+--------------------------------+-------------------+</span><br><span class="line">| ID                                   | Name       | Size | Share Proto | Status    | Is Public | Share Type Name    | Host                           | Availability Zone |</span><br><span class="line">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+--------------------------------+-------------------+</span><br><span class="line">| a4b2a4f1-421f-4de3-8fca-d2ee8a5f4bb9 | share-test | 2    | NFS         | available | False     | default_share_type | controller@lvm#lvm-single-pool | nova              |</span><br><span class="line">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+--------------------------------+-------------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用Manila命令开放share-test目录对OpenStack管理网段使用权限</span></span><br><span class="line">[root@controller ~]# manila access-allow share-test ip  0.0.0.0/24 --access-level rw</span><br><span class="line">+--------------+--------------------------------------+</span><br><span class="line">| Property     | Value                                |</span><br><span class="line">+--------------+--------------------------------------+</span><br><span class="line">| access_key   | None                                 |</span><br><span class="line">| share_id     | a4b2a4f1-421f-4de3-8fca-d2ee8a5f4bb9 |</span><br><span class="line">| created_at   | 2022-05-06T11:27:19.000000           |</span><br><span class="line">| updated_at   | None                                 |</span><br><span class="line">| access_type  | ip                                   |</span><br><span class="line">| access_to    | 0.0.0.0/24                       |</span><br><span class="line">| access_level | rw                                   |</span><br><span class="line">| state        | queued_to_apply                      |</span><br><span class="line">| <span class="built_in">id</span>           | 9813f7f2-d15f-46cf-ad2d-062ce6ce3264 |</span><br><span class="line">| metadata     | &#123;&#125;                                   |</span><br><span class="line">+--------------+--------------------------------------+</span><br><span class="line"><span class="comment">#查看share-test目录共享目录权限及开放网段</span></span><br><span class="line">[root@controller ~]# manila access-list share-test</span><br><span class="line">+--------------------------------------+-------------+----------------+--------------+--------+------------+----------------------------+------------+</span><br><span class="line">| <span class="built_in">id</span>                                   | access_type | access_to      | access_level | state  | access_key | created_at                 | updated_at |</span><br><span class="line">+--------------------------------------+-------------+----------------+--------------+--------+------------+----------------------------+------------+</span><br><span class="line">| 9813f7f2-d15f-46cf-ad2d-062ce6ce3264 | ip          | 10.24.195.0/24 | rw           | active | None       | 2022-05-06T11:27:19.000000 | None       |</span><br><span class="line">+--------------------------------------+-------------+----------------+--------------+--------+------------+----------------------------+------------+</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看share-test目录共享目录访问路径</span></span><br><span class="line">[root@controller ~]# manila show share-test | grep path | <span class="built_in">cut</span> -d<span class="string">&#x27;|&#x27;</span> -f3</span><br><span class="line"> path = 127.0.0.1:/var/lib/manila/mnt/share-55f94a46-9ac0-4b7e-8981-d83ac6fce8d7 </span><br><span class="line"><span class="comment">#在openStack控制节点将share-test共享目录挂载至/mnt目录下</span></span><br><span class="line">[root@controller ~]# mount -t nfs 172.30.17.5:/var/lib/manila/mnt/share-c3f5a9fc-a8e7-40a6-a43b-56cfd1738724 /mnt/</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看挂载信息</span></span><br><span class="line">[root@controller ~]# <span class="built_in">df</span> -th</span><br><span class="line">文件系统                                                                                                                 类型   容量  已用  可用     已用%  挂载点</span><br><span class="line">devtmpfs                                                                                                          devtmpfs  5.8G  0       5.8G      0%     /dev</span><br><span class="line">tmpfs                                                                                                                     tmpfs  5.8G  68K   5.8G     1%       /dev/shm</span><br><span class="line">tmpfs                                                                                                                     tmpfs  5.8G 592M 5.3G     10%     /run</span><br><span class="line">tmpfs                                                                                                                     tmpfs  5.8G  0        5.8G     0%     /sys/fs/cgroup</span><br><span class="line">/dev/vda1                                                                                                                 xfs    50G   8.1G 42G     17%     /</span><br><span class="line">tmpfs                                                                                                                     tmpfs  1.2G   0      1.2G      0%     /run/user/0</span><br><span class="line">172.30.17.5:/var/lib/manila/mnt/share-c3f5a9fc-a8e7-40a6-a43b-56cfd1738724 nfs4   2.0G  6.0M  1.8G    1%     /mnt</span><br></pre></td></tr></table></figure>

<h1 id="第二套"><a href="#第二套" class="headerlink" title="第二套"></a>第二套</h1><h2 id="私有云运维任务：-1"><a href="#私有云运维任务：-1" class="headerlink" title="私有云运维任务："></a>私有云运维任务：</h2><p>1.使用自动搭建的OpenStack平台，登录数据库，创建库test，并在库test中创建表company（表结构如(id int not null primary key,name varchar(50),addr varchar(255))所示），在表company中插入一条数据(1,”alibaba”,”china”)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#登录数据库</span></span><br><span class="line">root@controller ~]# mysql -uroot -p</span><br><span class="line">Enter password:</span><br><span class="line">MariaDB [(none)]&gt; create database <span class="built_in">test</span>;</span><br><span class="line">Query OK, 1 row affected (0.000 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use <span class="built_in">test</span>;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="built_in">test</span>]&gt; create table company(<span class="built_in">id</span> int not null primary key,name varchar(50),addr varchar(255));</span><br><span class="line">Query OK, 0 rows affected (0.003 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="built_in">test</span>]&gt; insert into company values (1,<span class="string">&quot;alibaba&quot;</span>,<span class="string">&quot;china&quot;</span>);</span><br><span class="line">Query OK, 1 row affected (0.001 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="built_in">test</span>]&gt; <span class="keyword">select</span> * from company;</span><br><span class="line">+----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span> | name    | addr  |</span><br><span class="line">+----+---------+-------+</span><br><span class="line">|  1 | alibaba | china |</span><br><span class="line">+----+---------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.000 sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.OpenStack各服务内部通信都是通过RPC来交互，各agent都需要去连接RabbitMQ；随着各服务agent增多，MQ的连接数会随之增多，最终可能会到达上限，成为瓶颈。使用提供的OpenStack私有云平台，通过修改limits.conf配置文件来修改RabbitMQ服务的最大连接数为10240</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# vi /etc/security/limits.conf</span><br><span class="line">openstack soft     nofile  10240</span><br><span class="line">openstack hard     nofile  10240</span><br><span class="line"><span class="comment">#在配置文件的最后添加两行内容如上,修改完之后，保存退出</span></span><br></pre></td></tr></table></figure>

<p>3.在提供的OpenStack私有云平台上，在&#x2F;root目录下编写Heat模板create_user.yaml，创建名为heat-user的用户，属于admin项目，并赋予heat-user用户admin的权限，配置用户密码为123456。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# <span class="built_in">cat</span> create_user.yaml</span><br><span class="line">heat_template_version: 2018-08-31</span><br><span class="line">resources:</span><br><span class="line">  user:</span><br><span class="line">    <span class="built_in">type</span>: OS::Keystone::User</span><br><span class="line">    properties:</span><br><span class="line">      name: heat-user</span><br><span class="line">      password: <span class="string">&quot;123456&quot;</span></span><br><span class="line">      domain: demo</span><br><span class="line">      default_project: admin</span><br><span class="line">      roles: [&#123;<span class="string">&quot;role&quot;</span>:<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;project&quot;</span>:<span class="string">&quot;admin&quot;</span>&#125;]</span><br><span class="line">[root@controller ~]# openstack stack create -t create_user.yaml heat-user</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| <span class="built_in">id</span>                  | f5bbca42-7962-49ce-b8e7-2b772544a920 |</span><br><span class="line">| stack_name          | heat-user                            |</span><br><span class="line">| description         | No description                       |</span><br><span class="line">| creation_time       | 2022-10-25T07:53:28Z                 |</span><br><span class="line">| updated_time        | None                                 |</span><br><span class="line">| stack_status        | CREATE_IN_PROGRESS                   |</span><br><span class="line">| stack_status_reason | Stack CREATE started                 |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.在提供的OpenStack私有云平台上，使用cirros-0.3.4-x86_64-disk.img镜像，创建一个名为Gmirror1的镜像，要求启动该镜像的最小硬盘是30G、最小内存是2048M。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack image create --disk-format qcow2 --container-format bare --min-disk 30 --min-ram 2048 --file ./cirros-0.3.4-x86_64-disk.img Gmirror1</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                                                                                                                                                      |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                                                                                                                                                           |</span><br><span class="line">| container_format | bare                                                                                                                                                                                       |</span><br><span class="line">| created_at       | 2022-10-25T07:57:28Z                                                                                                                                                                       |</span><br><span class="line">| disk_format      | qcow2                                                                                                                                                                                      |</span><br><span class="line">| file             | /v2/images/1acb0e45-eefa-4e64-aaed-b3f4e3d85c02/file                                                                                                                                       |</span><br><span class="line">| <span class="built_in">id</span>               | 1acb0e45-eefa-4e64-aaed-b3f4e3d85c02                                                                                                                                                       |</span><br><span class="line">| min_disk         | 30                                                                                                                                                                                         |</span><br><span class="line">| min_ram          | 2048                                                                                                                                                                                       |</span><br><span class="line">| name             | Gmirror1                                                                                                                                                                                   |</span><br><span class="line">| owner            | ef3705db528144cc9a33f8ace06d6d3b                                                                                                                                                           |</span><br><span class="line">| properties       | os_hash_algo=<span class="string">&#x27;sha512&#x27;</span>, os_hash_value=<span class="string">&#x27;1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2&#x27;</span>, os_hidden=<span class="string">&#x27;False&#x27;</span> |</span><br><span class="line">| protected        | False                                                                                                                                                                                      |</span><br><span class="line">| schema           | /v2/schemas/image                                                                                                                                                                          |</span><br><span class="line">| size             | 13287936                                                                                                                                                                                   |</span><br><span class="line">| status           | active                                                                                                                                                                                     |</span><br><span class="line">| tags             |                                                                                                                                                                                            |</span><br><span class="line">| updated_at       | 2022-10-25T07:57:29Z                                                                                                                                                                       |</span><br><span class="line">| virtual_size     | None                                                                                                                                                                                       |</span><br><span class="line">| visibility       | shared                                                                                                                                                                                     |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>5.在提供的OpenStack私有云平台上，自行安装Swift服务，新建名为chinaskill的容器，将cirros-0.3.4-x86_64-disk.img镜像上传到chinaskill容器中，并设置分段存放，每一段大小为10M。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# swift post chinaskill</span><br><span class="line">[root@controller ~]# swift upload chiaskill -S 10000000 cirros-0.3.4-x86_64-disk.img</span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 1</span><br><span class="line">cirros-0.3.4-x86_64-disk.img segment 0</span><br><span class="line">cirros-0.3.4-x86_64-disk.img</span><br></pre></td></tr></table></figure>

<p>6.使用OpenStack私有云平台，创建两台云主机vm1和vm2，在这两台云主机上分别安装数据库服务，并配置成主从数据库，vm1节点为主库，vm2节点为从库（数据库密码设置为000000）。</p>
<table>
<thead>
<tr>
<th>vm1</th>
<th>192.168.200.101</th>
<th>主库</th>
</tr>
</thead>
<tbody><tr>
<td>vm2</td>
<td>192.168.200.102</td>
<td>从库</td>
</tr>
</tbody></table>
<p>①添加主机映射(并且关闭防火墙)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">192.168.200.101 vm1</span><br><span class="line">192.168.200.102 vm2</span><br></pre></td></tr></table></figure>

<p>②安装并配置mariadb</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mariadb mariadb-server</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动mariadb</span></span><br><span class="line">systemctl start mariadb</span><br><span class="line"><span class="comment">#配置</span></span><br><span class="line">mysql_secure_installation </span><br><span class="line"> y 000000 000000 y n y y</span><br></pre></td></tr></table></figure>

<p>③配置主节点</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br><span class="line"></span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">binlog_ignore_db=mysql</span><br><span class="line">server-id=101  <span class="comment">#每个服务器都需要添加server_id配置，各个服务器的server_id需要保证唯一性，实践中通过设置为服务器ip地址的最后一位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重启服务</span></span><br><span class="line">systemctl restart mariadb</span><br><span class="line"><span class="comment">#登录数据库</span></span><br><span class="line">mysql -uroot -p000000</span><br><span class="line"> <span class="comment">#授权</span></span><br><span class="line"> -&gt; grant replication slave on *.*  to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;000000&#x27;</span>;</span><br><span class="line"> -&gt; grant replication slave on *.* to <span class="string">&#x27;user&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;000000&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>④配置从节点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br><span class="line">server-id=102</span><br><span class="line">log-bin=mysql-bin </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启服务</span></span><br><span class="line">systemctl restart mariadb</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">登录并配置</span></span><br><span class="line">mysql -uroot -p000000</span><br><span class="line"><span class="meta prompt_">-&gt; </span><span class="language-bash">change master to master_host=<span class="string">&#x27;vm1&#x27;</span>,master_user=<span class="string">&#x27;user&#x27;</span>,master_password=<span class="string">&#x27;000000</span></span></span><br><span class="line"><span class="meta prompt_">-&gt; </span><span class="language-bash"><span class="string">start slave;</span></span></span><br><span class="line"><span class="meta prompt_">-&gt; </span><span class="language-bash"><span class="string">show slave status\G;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>9.使用cloudkitty计费服务，处理虚拟机实例(compute)、云硬盘(volume)、镜像(image)、网络进出流量(network.bw.in, network.bw.out)、浮动IP(network.floating)的计费数据并进行计费规则创建，以达到费用核算目的。</p>
<p><strong>实例类型收费</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建云主机服务instance_test,通过命令创建service服务</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap service create instance_test</span><br><span class="line">+---------------+--------------------------------------+</span><br><span class="line">| Name          | Service ID                           |</span><br><span class="line">+---------------+--------------------------------------+</span><br><span class="line">| instance_test | cf8029bf-dc35-4e40-b8fd-5af4a4d25a30 |</span><br><span class="line">+---------------+--------------------------------------+</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建名为flavor_name的fields</span></span><br><span class="line">root@controller ~]# openstack rating hashmap field create cf8029bf-dc35-4e40-b8fd-5af4a4d25a30 flavor_name</span><br><span class="line">+-------------+--------------------------------------+--------------------------------------+</span><br><span class="line">| Name        | Field ID                             | Service ID                           |</span><br><span class="line">+-------------+--------------------------------------+--------------------------------------+</span><br><span class="line">| flavor_name | b2f0d485-df20-4f2e-bd44-d3696971cb8f | cf8029bf-dc35-4e40-b8fd-5af4a4d25a30 |</span><br><span class="line">+-------------+--------------------------------------+--------------------------------------+</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置规格为m1.small的云主机单价为1元</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap mapping create  --field-id b2f0d485-df20-4f2e-bd44-d3696971cb8f  -t flat --value  m1.small 1</span><br><span class="line">+--------------------+--------+----------+----+--------------------+----------+--------+----------+</span><br><span class="line">| Mapping ID         |Value   |Cost      |Type| Field ID           |Service ID|Group ID|Project ID|</span><br><span class="line">+--------------------+--------+----------+----+--------------------+----------+--------+----------+</span><br><span class="line">| c1b7d4db-c1d2-4488 |m1.small|1.00000000|flat| b2f0d485-df20-4f2e | None     | None   | None     |</span><br><span class="line">  -ac46-1a8eb70d76e4                            -bd44-d3696971cb8f</span><br><span class="line">+--------------------+--------+----------+----+--------------------+----------+--------+----------+</span><br></pre></td></tr></table></figure>

<p><strong>云硬盘服务费用</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建云硬盘服务费用volume_size</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap service create volume_size</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| Name        | Service ID                           |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line">| volume_size | 6bd25052-eb27-49b1-ad68-aab723059a95 |</span><br><span class="line">+-------------+--------------------------------------+</span><br><span class="line"><span class="comment">#设置价格为1.2元</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap mapping create -s 6bd25052-eb27-49b1-ad68-aab723059a95 -t flat 1.2</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+----------+------------+</span><br><span class="line">| Mapping ID                           | Value | Cost       | Type | Field ID | Service ID                           | Group ID | Project ID |</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+----------+------------+</span><br><span class="line">| bd57621f-523b-43f2-89fb-2ea07fd04fac | None  | 1.20000000 | flat | None     | 6bd25052-eb27-49b1-ad68-aab723059a95 | None     | None       |</span><br><span class="line">+--------------------------------------+-------+------------+------+----------+--------------------------------------+----------+------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>镜像服务费用</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建镜像收费服务image_size_test</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap service create image_size_test</span><br><span class="line">+-----------------+--------------------------------------+</span><br><span class="line">| Name            | Service ID                           |</span><br><span class="line">+-----------------+--------------------------------------+</span><br><span class="line">| image_size_test | 80a098cf-d793-47cf-b63e-df6cbd56e88d |</span><br><span class="line">+-----------------+--------------------------------------+</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">并为该服务单价设置为0.8元</span></span><br><span class="line">[root@controller ~]# openstack rating hashmap mapping create -s  80a098cf-d793-47cf-b63e-df6cbd56e88d   -t flat 0.8 </span><br><span class="line">+--------------------+-------+------------+------+----------+--------------------+--------+----------+</span><br><span class="line">| Mapping ID         | Value | Cost       | Type | Field ID | Service ID         |Group ID|Project ID|</span><br><span class="line">+--------------------+-------+------------+------+----------+--------------------+--------+----------+</span><br><span class="line">| 64952e70-6e37-4c8a | None  | 0.80000000 | flat | None     | 80a098cf-d793-47cf | None   | None     |</span><br><span class="line">  -9d3a-b4c70de1fb87                                          -b63e-df6cbd56e88d</span><br><span class="line">+--------------------+-------+------------+------+----------+--------------------+--------+----------</span><br></pre></td></tr></table></figure>

<h1 id="第三套"><a href="#第三套" class="headerlink" title="第三套"></a>第三套</h1><h2 id="OpenStack云平台运维"><a href="#OpenStack云平台运维" class="headerlink" title="OpenStack云平台运维"></a>OpenStack云平台运维</h2><p><strong>2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：</strong></p>
<p>（1）预留前2个物理CPU，把后面的所有CPU分配给虚拟机使用（假设vcpu为16个）；</p>
<p>（2）设置cpu超售比例为4倍；</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nova/nova.conf</span><br><span class="line"><span class="comment">###不知道哪个对</span></span><br><span class="line">cpu_dedicated_set = 2</span><br><span class="line">cpu_shared_set = 14</span><br><span class="line"></span><br><span class="line">vcpu_pin_set = 2-15</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cpu_allocation_ratio = 4.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>3.在提供的OpenStack平台上，对mencached服务进行操作使memcached的缓存由64MB变为256MB。</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/memcached</span><br><span class="line">CACHESIZE=<span class="string">&quot;256&quot;</span></span><br></pre></td></tr></table></figure>

<p>4.在提供的OpenStack平台上，编写heat模板createnet.yml文件，模板作用为按照要求创建一个网络和子网。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@controller</span> <span class="string">~</span>]<span class="comment"># cat createnet.yml</span></span><br><span class="line"><span class="attr">heat_template_version:</span> <span class="number">2018-08-31</span></span><br><span class="line"><span class="attr">resources:</span></span><br><span class="line">  <span class="attr">net1:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">OS::Neutron::Net</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">net1</span></span><br><span class="line">  <span class="attr">net-subnet:</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">cidr:</span> <span class="number">10.1</span><span class="number">.0</span><span class="number">.0</span><span class="string">/24</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">net1-subent</span></span><br><span class="line">      <span class="attr">enable_dhcp:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">gateway_ip:</span> <span class="number">10.1</span><span class="number">.0</span><span class="number">.2</span></span><br><span class="line">      <span class="attr">allocation_pools:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">start:</span> <span class="number">10.1</span><span class="number">.0</span><span class="number">.100</span></span><br><span class="line">          <span class="attr">end:</span> <span class="number">10.1</span><span class="number">.0</span><span class="number">.200</span></span><br><span class="line">      <span class="attr">network:</span> &#123;<span class="attr">get_resource:</span> <span class="string">net1</span>&#125;</span><br><span class="line">    <span class="attr">type:</span> <span class="string">OS::Neutron::Subnet</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建网络</span></span><br><span class="line"><span class="string">openstack</span> <span class="string">stack</span> <span class="string">create</span> <span class="string">-t</span> <span class="string">createnet.yml</span> <span class="string">net</span></span><br></pre></td></tr></table></figure>

<p><strong>5.使用提供的OpenStack私有云平台，修改普通用户权限，使普通用户不能对镜像进行创建和删除操作</strong>从（参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/wangjinruifly/article/details/79706807?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-79706807-blog-94681036.pc_relevant_3mothn_strategy_recovery&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-79706807-blog-94681036.pc_relevant_3mothn_strategy_recovery&utm_relevant_index=2">(1条消息) OpenStack Keystone (2): 角色权限管理_hhzzk的博客-CSDN博客_openstack 角色 权限</a>）</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33963594/article/details/94681036">(2条消息) openstack 权限控制 （添加自定义角色）keystone等组件_weixin_33963594的博客-CSDN博客</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/glance/policy.json</span><br><span class="line"> <span class="string">&quot;add_image&quot;</span>: <span class="string">&quot;role:admin&quot;</span>,</span><br><span class="line"> <span class="string">&quot;delete_image&quot;</span>: <span class="string">&quot;role:admin&quot;</span>,</span><br></pre></td></tr></table></figure>

<p><strong>9.在OpenStack私有云平台，创建一台云主机，编写脚本，要求可以完成数据库的定期备份，并把数据库备份文件存放在&#x2F;opt目录下。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#!bin/bash</span><br><span class="line">#备份路径</span><br><span class="line">BACKUP=/root/mysql-backup</span><br><span class="line">#数据库的定时备份</span><br><span class="line">DATETIME=`date +%Y_%m_%d_%H%%M%S`</span><br><span class="line">#echo &quot;$DATETIME&quot;</span><br><span class="line">echo &quot;====start backup to $BACKUP/$DATETIME/$DATETIME.tar.gz=====&quot;</span><br><span class="line">#主机</span><br><span class="line">HOST=rabbitmq</span><br><span class="line">DB_USER=xy</span><br><span class="line">DB_PWD=000000</span><br><span class="line">#要备份的数据库名</span><br><span class="line">DATABASE=xy</span><br><span class="line">#创建备份的路径，如果路径不存在就创建</span><br><span class="line">[ ! -d &quot;$BACKUP/$DATETIME&quot; ] &amp;&amp; mkdir -p &quot;$BACKUP/$DATETIME&quot;</span><br><span class="line">#执行mysql的备份数据库指令</span><br><span class="line">mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PWD&#125; --host=$HOST $DATABASE | gzip &gt; $BACKUP/$DATETIME/$DATETIME.sql.gz</span><br><span class="line">#打包备份文件</span><br><span class="line">cd $BACKUP</span><br><span class="line">tar -zcvf $DATETIME.tar.gz $DATETIME</span><br><span class="line">#删除临时目录</span><br><span class="line">rm -rf $BACKUP/$DATETIME</span><br><span class="line">#删除1天前的备份文件</span><br><span class="line">#在$backup目录下按照时间找10天前的名称为*.tar.gz的文件，-exec表示执行找到的文件</span><br><span class="line">find $BACKUP -mtime +1 -name &quot;*.tar.gz&quot; -exec rm rf &#123;&#125; \;</span><br><span class="line">echo &quot;============backup success============&quot;</span><br><span class="line">#加入定时任务表示每天8点30分执行后面的命令（shell脚本的路径）</span><br><span class="line">crontab -e</span><br><span class="line">30 8 * * * /root/mysql_backup.sh</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.geekgold.xyz">GoldY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.geekgold.xyz/posts/2c8237f4.html">https://www.geekgold.xyz/posts/2c8237f4.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.geekgold.xyz" target="_blank">GoldY</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97%E8%81%8C%E4%B8%9A%E6%8A%80%E8%83%BD%E5%A4%A7%E8%B5%9B/">云计算职业技能大赛</a></div><div class="post-share"><div class="social-share" data-image="/img/cloud-com.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src="/img/zhifubao.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/9bf3df10.html" title="云计算方向-2022年全国职业院校技能大赛容器云"><img class="cover" src="/img/cloud-com.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">云计算方向-2022年全国职业院校技能大赛容器云</div></div><div class="info-2"><div class="info-item-1">【任务 1】容器云平台搭建[5 分] 【题目 1】平台部署–部署容器云平台[1.5 分]登录OpenStack 私有云平台，使用 CentOS7.9 镜像创建两台云主机，使用 kubeeasy 工具完成Kubernetes 1.22.1 集群的搭建。然后使用 nginx 镜像在 default 命名空间下创建一个名为exam 的Pod，并为该 Pod 设置环境变量 exam，其值为 2022。完成后提交 master 节点的用户名、密码和 IP 到答题框。 123456789101112131415161718192021222324252627282930313233#两台节点，将提供的安装包 chinaskills_cloud_paas_v2.0.2.iso 上传至 master 节点/root 目录，并解压 到/opt 目录[root@localhost ~]# mount -o loop chinaskills_cloud_paas_v2.0.2.iso /mnt/ [root@localhost ~]# cp -rfv /mnt/* /opt/...</div></div></div></a><a class="pagination-related" href="/posts/c134dd26.html" title="云计算方向-2022年云计算技能大赛样题"><img class="cover" src="/img/cloud-com.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">云计算方向-2022年云计算技能大赛样题</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/6bf8b7d7.html" title="云计算方向-2022年云计算职业技能大赛国赛题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2022年云计算职业技能大赛国赛题</div></div><div class="info-2"><div class="info-item-1">第一套【任务 1】私有云服务搭建[10分]【题目 1】基础环境配置[0.5 分]使用提供的用户名密码，登录提供的 OpenStack 私有云平台，在当前租户下，使用CentOS7.9 镜像，创建两台云主机，云主机类型使用 4vCPU&#x2F;12G&#x2F;100G_50G 类型。当前租户下默认存在一张网卡，自行创建第二张网卡并连接至 controller 和 compute 节点（第二张网卡的网段为 10.10.X.0&#x2F;24，X 为工位号，不需要创建路由）。自行检查安全组策略，以确保网络正常通信与 ssh 连接，然后按以下要求配置服务器： （1）设置控制节点主机名为 controller，设置计算节点主机名为 compute；  （2）修改 hosts 文件将 IP 地址映射为主机名； 1231.查看控制节点名字为 controller 正确计 0.2 分2.查看 hosts 文件中有正确的主机名和 IP 映射计 0.2 分3.控制节点正确使用两块网卡计 0.1...</div></div></div></a><a class="pagination-related" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年金砖一带一路职业技能大赛云计算赛题</div></div><div class="info-2"><div class="info-item-1">A场次题目：Openstack 平台部署与运维任务1 私有云平台环境初始化1.初始化操作系统 使用提供的用户名密码，登录竞赛云平台。根据表 1 中的 IP 地址规划，设置各服务器节点的 IP 地址，确保网络正常通信，设置控制节点主机名为 Contro ller，计算节点主机名为 Compute，并修改 hosts 文件将 IP 地址映射为主机名， 关闭防火墙并设置为开机不启动，设置 SELinux 为 Permissive 模式并设置永久 关闭。请查看控制节点和计算节点主机名，使用命令查看 SELinux 状态，使用 head 命令、tail 命令和 cut 命令提取出永久关闭 SELinux 的关键信息。 将以上命令及返回结果提交到答题框  配置host 123456vi /etc/hosts127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4::1         localhost localhost.localdomain localhost6...</div></div></div></a><a class="pagination-related" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-Ansible搭建wordpress</div></div><div class="info-2"><div class="info-item-1">一.ansible搭建wordpress基于lamp构建wordpress    master 192.168.200.100 控制节点    node1 192.168.200.101 web服务器   node2 192.168.200.102 mysql服务器   vi &#x2F;etc&#x2F;ansible&#x2F;host 12345678[master]master[web]192.168.200.101node1[database]192.168.200.102node2  vi wordpress.yaml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354---# hosts: 后面可写主机组名或主机名- hosts: all  remote_user: root  # 定义变量  vars:    db_pkgs:      # 以下的-为变量“值”，也就是在引用db_pkgs变量时，可取变量中的值   ...</div></div></div></a><a class="pagination-related" href="/posts/840d388d.html" title="云计算方向-2023年金砖大赛山东选拔题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年金砖大赛山东选拔题</div></div><div class="info-2"><div class="info-item-1">A场次题目：OpenStack平台部署与运维业务场景： 某企业拟使用OpenStack搭建一个企业云平台，用于部署各类企业应用对外对内服务。云平台可实现IT资源池化，弹性分配，集中管理，性能优化以及统一安全认证等。系统结构如下图： 企业云平台的搭建使用竞赛平台提供的两台云服务器，配置如下表：    设备名称 主机名 接口 ip地址    云服务器1 controller eth0，eth1 私网：192.168.100.10&#x2F;24           私网：192.168.200.10&#x2F;24   云服务器2 compute eth0，eth1 私网：192.168.100.20&#x2F;24        ...</div></div></div></a><a class="pagination-related" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2023年GZ075 云计算应用赛项赛题</div></div><div class="info-2"><div class="info-item-1">模块一 私有云（30分）企业首先完成私有云平台搭建和运维，私有云平台提供云主机、云网络、云存储等基础架构云服务，并开发自动化运维程序。 任务1 私有云服务搭建（5分）1.1.1 基础环境配置1.控制节点主机名为controller，设置计算节点主机名为compute； 12345678910#控制节点[root@localhost ~]# hostnamectl set-hostname controller[root@localhost ~]# bash[root@controller ~]##计算节点[root@localhost ~]# hostnamectl set-hostname compute[root@localhost ~]# bash[root@compute ~]#    2.hosts文件将IP地址映射为主机名。 123456#全部节点[root@controller ~]# cat /etc/hosts127.0.0.1   localhost localhost.localdomain localhost4...</div></div></div></a><a class="pagination-related" href="/posts/9bf3df10.html" title="云计算方向-2022年全国职业院校技能大赛容器云"><img class="cover" src="/img/cloud-com.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-14</div><div class="info-item-2">云计算方向-2022年全国职业院校技能大赛容器云</div></div><div class="info-2"><div class="info-item-1">【任务 1】容器云平台搭建[5 分] 【题目 1】平台部署–部署容器云平台[1.5 分]登录OpenStack 私有云平台，使用 CentOS7.9 镜像创建两台云主机，使用 kubeeasy 工具完成Kubernetes 1.22.1 集群的搭建。然后使用 nginx 镜像在 default 命名空间下创建一个名为exam 的Pod，并为该 Pod 设置环境变量 exam，其值为 2022。完成后提交 master 节点的用户名、密码和 IP 到答题框。 123456789101112131415161718192021222324252627282930313233#两台节点，将提供的安装包 chinaskills_cloud_paas_v2.0.2.iso 上传至 master 节点/root 目录，并解压 到/opt 目录[root@localhost ~]# mount -o loop chinaskills_cloud_paas_v2.0.2.iso /mnt/ [root@localhost ~]# cp -rfv /mnt/* /opt/...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">GoldY</div><div class="author-info-description">不经一番寒彻骨，怎得梅花扑鼻香。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuwenjin666"><i class="fab fa-github"></i><span>Github主页</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">联系我V：GoldY_66</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A5%97"><span class="toc-number">1.</span> <span class="toc-text">第一套</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E4%BA%91%E8%BF%90%E7%BB%B4%E4%BB%BB%E5%8A%A1%EF%BC%9A"><span class="toc-number">1.1.</span> <span class="toc-text">私有云运维任务：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE3-OpenStack%E4%BA%91%E5%B9%B3%E5%8F%B0%E8%BF%90%E7%BB%B4%EF%BC%8810%E5%88%86%EF%BC%89"><span class="toc-number">1.1.1.</span> <span class="toc-text">题目3. OpenStack云平台运维（10分）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BA%91%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%B0%86%E6%8F%90%E4%BE%9B%E7%9A%84OpenStack%E4%BA%91%E5%B9%B3%E5%8F%B0%E7%9A%84%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%E4%BB%8Ehttp%E4%BC%98%E5%8C%96%E8%87%B3https%E3%80%82"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1.使用提供的云安全框架组件，将提供的OpenStack云平台的安全策略从http优化至https。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%9C%A8%E6%8F%90%E4%BE%9B%E7%9A%84OpenStack%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0%E5%AF%B9openstack%E5%B9%B3%E5%8F%B0%E8%BF%9B%E8%A1%8C%E8%B0%83%E4%BC%98%E6%93%8D%E4%BD%9C%EF%BC%8C%E7%9B%B8%E5%BA%94%E7%9A%84%E8%B0%83%E4%BC%98%E6%93%8D%E4%BD%9C%E6%9C%89%EF%BC%9A"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">2.在提供的OpenStack平台上，通过修改相关参数对openstack平台进行调优操作，相应的调优操作有：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9C%A8%E6%8F%90%E4%BE%9B%E7%9A%84OpenStack%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E4%BD%BF%E7%94%A8Swift%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%BA%94%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E4%BD%BF%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8Swift%E4%BD%9C%E4%B8%BAglance%E9%95%9C%E5%83%8F%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%8E%E7%AB%AF%E5%AD%98%E5%82%A8%E3%80%82"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">3.在提供的OpenStack平台上，使用Swift对象存储服务，修改相应的配置文件，使对象存储Swift作为glance镜像服务的后端存储。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%9C%A8%E6%8F%90%E4%BE%9B%E7%9A%84OpenStack%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E7%BC%96%E5%86%99heat%E6%A8%A1%E6%9D%BFcreatevm-yml%E6%96%87%E4%BB%B6%EF%BC%8C%E6%A8%A1%E6%9D%BF%E4%BD%9C%E7%94%A8%E4%B8%BA%E6%8C%89%E7%85%A7%E8%A6%81%E6%B1%82%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%BA%91%E4%B8%BB%E6%9C%BA%E3%80%82"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">4.在提供的OpenStack平台上，编写heat模板createvm.yml文件，模板作用为按照要求创建一个云主机。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%9C%A8%E6%8F%90%E4%BE%9B%E7%9A%84OpenStack%E5%B9%B3%E5%8F%B0%E4%B8%8A%EF%BC%8C%E5%AF%B9cinder%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%AE%B9%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%A6%81%E6%B1%82%E5%B0%86cinder%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%E6%89%A9%E5%AE%B910G%E3%80%82"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">5.在提供的OpenStack平台上，对cinder存储空间进行扩容操作，要求将cinder存储空间扩容10G。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%9C%A8OpenStack%E7%A7%81%E6%9C%89%E4%BA%91%E5%B9%B3%E5%8F%B0%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E5%8F%B0%E4%BA%91%E4%B8%BB%E6%9C%BA%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%8F%90%E4%BE%9B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85%EF%BC%8C%E7%BC%96%E5%86%99%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC%EF%BC%8C%E8%A6%81%E6%B1%82%E5%8F%AF%E4%BB%A5%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2gpmall%E5%95%86%E5%9F%8E%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E3%80%82"><span class="toc-number">1.1.1.6.</span> <span class="toc-text">6.在OpenStack私有云平台，创建一台云主机，使用提供的软件包，编写一键部署脚本，要求可以一键部署gpmall商城应用系统。</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="toc-number">1.1.1.6.1.</span> <span class="toc-text">手动部署</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E4%BD%BF%E7%94%A8manila%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BD%BFmanila%E4%B8%BA%E5%A4%9A%E7%A7%9F%E6%88%B7%E4%BA%91%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%8F%90%E4%BE%9B%E7%BB%9F%E4%B8%80%E7%9A%84%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E3%80%82"><span class="toc-number">1.1.1.7.</span> <span class="toc-text">7.使用manila共享文件系统服务，使manila为多租户云环境中的共享文件系统提供统一的管理服务。</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A5%97"><span class="toc-number">2.</span> <span class="toc-text">第二套</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E4%BA%91%E8%BF%90%E7%BB%B4%E4%BB%BB%E5%8A%A1%EF%BC%9A-1"><span class="toc-number">2.1.</span> <span class="toc-text">私有云运维任务：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A5%97"><span class="toc-number">3.</span> <span class="toc-text">第三套</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenStack%E4%BA%91%E5%B9%B3%E5%8F%B0%E8%BF%90%E7%BB%B4"><span class="toc-number">3.1.</span> <span class="toc-text">OpenStack云平台运维</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-Ansible搭建wordpress"/></a><div class="content"><a class="title" href="/posts/944d69ee.html" title="云计算方向-Ansible搭建wordpress">云计算方向-Ansible搭建wordpress</a><time datetime="2025-05-14T02:48:38.000Z" title="发表于 2025-05-14 10:48:38">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题"/></a><div class="content"><a class="title" href="/posts/a182640a.html" title="云计算方向-2023年金砖一带一路职业技能大赛云计算赛题">云计算方向-2023年金砖一带一路职业技能大赛云计算赛题</a><time datetime="2025-05-14T02:48:37.000Z" title="发表于 2025-05-14 10:48:37">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d5ee981d.html" title="云计算方向-2023年一带一路职业技能大赛云计算(样题)"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年一带一路职业技能大赛云计算(样题)"/></a><div class="content"><a class="title" href="/posts/d5ee981d.html" title="云计算方向-2023年一带一路职业技能大赛云计算(样题)">云计算方向-2023年一带一路职业技能大赛云计算(样题)</a><time datetime="2025-05-14T02:48:35.000Z" title="发表于 2025-05-14 10:48:35">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a8884406.html" title="云计算方向-2023年金砖大赛"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年金砖大赛"/></a><div class="content"><a class="title" href="/posts/a8884406.html" title="云计算方向-2023年金砖大赛">云计算方向-2023年金砖大赛</a><time datetime="2025-05-14T02:48:32.000Z" title="发表于 2025-05-14 10:48:32">2025-05-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题"><img src="/img/cloud-com.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="云计算方向-2023年GZ075 云计算应用赛项赛题"/></a><div class="content"><a class="title" href="/posts/cc6b9ff2.html" title="云计算方向-2023年GZ075 云计算应用赛项赛题">云计算方向-2023年GZ075 云计算应用赛项赛题</a><time datetime="2025-05-14T02:47:38.000Z" title="发表于 2025-05-14 10:47:38">2025-05-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/bottom-bg.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2025 By GoldY</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-ashen-rho.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo-ashen-rho.vercel.app/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="/js/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://githubcalendarapi.shiguang666.eu.org/api?user=yuwenjin666";
            var git_color =['#ebedf0', '#a2f7af', '#6ce480', '#54ad63', '#469252', '#31753c', '#1f5f2a', '#13531f', '#084111', '#032b09', '#000000'];
            var git_user ="yuwenjin666";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>